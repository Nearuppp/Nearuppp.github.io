2:I[168,["671","static/chunks/671-870bf4da9bc73117.js","242","static/chunks/app/knowledge-hub/%5Bslug%5D/page-a57df3892695a452.js"],"default"]
3:I[2972,["671","static/chunks/671-870bf4da9bc73117.js","242","static/chunks/app/knowledge-hub/%5Bslug%5D/page-a57df3892695a452.js"],""]
a:I[4707,[],""]
c:I[6423,[],""]
d:I[2798,["185","static/chunks/app/layout-23fdfd89875a333b.js"],"ThemeProvider"]
4:T5b2,__asm void xPortPendSVHandler(void)
{
    extern uxCriticalNesting
    extern pxCurrentTCB
    extern vTaskSwitchContext

    PRESERVE8

    mrs     r0, psp                // Get Process Stack Pointer
    isb                            // Instruction Synchronization Barrier

    ldr     r3, =pxCurrentTCB     // Load address of pxCurrentTCB
    ldr     r2, [r3]              // Load the current TCB pointer

    stmdb   r0!, {r4-r11}         // Save r4–r11 on the task's stack (Decrement Before)
    str     r0, [r2]              // Save new stack pointer into current TCB

    stmdb   sp!, {r3, lr}         // Save r3 and LR before calling function

    mov     r0, #configMAX_SYSCALL_INTERRUPT_PRIORITY
    msr     basepri, r0           // Mask interrupts at or below priority level

    bl      vTaskSwitchContext    // Perform the actual context switch

    mov     r0, #0
    msr     basepri, r0           // Re-enable all interrupts

    ldmia   sp!, {r3, lr}         // Restore r3 and LR
    ldr     r1, [r3]              // Get new TCB (task to run)
    ldr     r0, [r1]              // Get top of stack from new TCB

    ldmia   r0!, {r4-r11}         // Restore registers for the new task
    msr     psp, r0               // Set PSP to new task's stack
    isb                           // Ensure instructions use updated PSP

    bx      lr                    // Return to the task
    nop                           // No operation (padding)
}
5:T40f,
TaskHandle_t xHandle; // Handle to the task so it can be resumed later

/* Function that creates the task. */
void vAFunction(void)
{
    // Create a task and save its handle in xHandle
    xTaskCreate(vTaskCode, "NAME", STACK_SIZE, NULL, tskIDLE_PRIORITY, &xHandle);

    // ... Other initialization code
}

/* The task function that suspends itself. */
void vTaskCode(void *pvParameters)
{
    for (;;)
    {
        // Do something useful here...

        // Suspend the task — NULL means "suspend self"
        vTaskSuspend(NULL);

        // When resumed, it continues here
    }
}

/* Example ISR that resumes the suspended task. */
void vAnExampleISR(void)
{
    BaseType_t xYieldRequired;

    // Resume the task from the ISR
    xYieldRequired = xTaskResumeFromISR(xHandle);

    // If resuming the task unblocked a higher priority task, request a context switch
    if (xYieldRequired == pdTRUE)
    {
        // This macro is port-specific: it ensures a proper context switch if needed
        portYIELD_FROM_ISR();
    }
}

6:T532,#define BIT_0 (1 << 0)
#define BIT_4 (1 << 4)
void aFunction(EventGroupHandle_t xEventGroup) {
    EventBits_t uxBits;
    /* Set bit 0 and bit 4 in xEventGroup. */
    /* The event group being updated. */
    /* The bits being set. */
    uxBits = xEventGroupSetBits(xEventGroup, BIT_0 | BIT_4);
    /* uxBits may be different from the value it is supposed to be: e.g. a task waiting on an event may clear it */
    if ((uxBits & (BIT_0 | BIT_4)) == (BIT_0 | BIT_4)) {
        /* Both bit 0 and bit 4 remained set when the function returned. */
    } else if ((uxBits & BIT_0) != 0) {
        /* Bit 0 remained set when the function returned, but bit 4 was
           cleared. It might be that bit 4 was cleared automatically as a
           task that was waiting for bit 4 was removed from the Blocked
           state. */
    } else if ((uxBits & BIT_4) != 0) {
        /* Bit 4 remained set when the function returned, but bit 0 was
           cleared. It might be that bit 0 was cleared automatically as a
           task that was waiting for bit 0 was removed from the Blocked
           state. */
    } else {
        /* Neither bit 0 nor bit 4 remained set. It might be that a task
           was waiting for both of the bits to be set, and the bits were cleared
           as the task left the Blocked state. */
    }
}

7:T510,/* Definitions for the event bits in the event group. */
#define mainFIRST_TASK_BIT  (1UL << 0UL) /* Event bit 0, set by a task. */
#define mainSECOND_TASK_BIT (1UL << 1UL) /* Event bit 1, set by a task. */
#define mainISR_BIT         (1UL << 2UL) /* Event bit 2, set by an ISR. */

int main(void) {
    /* Before an event group can be used it must first be created. */
    xEventGroup = xEventGroupCreate();

    /* Create the task that sets event bits in the event group. */
    xTaskCreate(vEventBitSettingTask, "Bit Setter", 1000, NULL, 1, NULL);

    /* Create the task that waits for event bits to get set in the event group. */
    xTaskCreate(vEventBitReadingTask, "Bit Reader", 1000, NULL, 2, NULL);

    /* Create the task that periodically generates a software interrupt. */
    xTaskCreate(vInterruptGenerator, "Int Gen", 1000, NULL, 3, NULL);

    /* Install the handler for the software interrupt.
       The syntax depends on the FreeRTOS port.
       This example is for the Windows port, where interrupts are simulated. */
    vPortSetInterruptHandler(mainINTERRUPT_NUMBER, ulEventBitSettingISR);

    /* Start the scheduler so the created tasks start executing. */
    vTaskStartScheduler();

    /* The following line should never be reached. */
    for(;;);

    return 0;
}

8:T466,static void vEventBitReadingTask(void *pvParameters) {
    EventBits_t xEventGroupValue;
    const EventBits_t xBitsToWaitFor = (mainFIRST_TASK_BIT | mainSECOND_TASK_BIT | mainISR_BIT);

    for (;;) {
        /* Block to wait for event bits to become set within the event group. */
        xEventGroupValue = xEventGroupWaitBits(
            xEventGroup,        /* The event group to read. */
            xBitsToWaitFor,     /* Bits to test. */
            pdTRUE,             /* Clear bits on exit if condition met. */
            pdFALSE,            /* Don't wait for all bits (wait for any). */
            portMAX_DELAY       /* Wait indefinitely. */
        );

        /* Print a message for each bit that was set. */
        if ((xEventGroupValue & mainFIRST_TASK_BIT) != 0)
            vPrintString("Bit reading task -\t Event bit 0 was set\r\n");

        if ((xEventGroupValue & mainSECOND_TASK_BIT) != 0)
            vPrintString("Bit reading task -\t Event bit 1 was set\r\n");

        if ((xEventGroupValue & mainISR_BIT) != 0)
            vPrintString("Bit reading task -\t Event bit 2 was set\r\n");
    }
}

9:T72e,// Dimensions the buffer that the task being
// created will use as its stack.
// NOTE: This is the number of words the stack
// will hold, not the number of bytes.
// For example, if each stack item is 32-bits,
// and this is set to 100,
// then 400 bytes (100 * 32-bits) will be allocated.
#define STACK_SIZE 200

// Structure that will hold the TCB (Task Control Block) of the task being created.
StaticTask_t xTaskBuffer;

// Buffer that the task being created will use as its stack. Note this is
// an array of StackType_t variables. The size of StackType_t is dependent on the RTOS port.
StackType_t xStack[STACK_SIZE];

// Function that implements the task being created.
void vTaskCode(void * pvParameters)
{
    // The parameter value is expected to be 1 as 1 is passed in
    // the pvParameters value in the call to xTaskCreateStatic().
    configASSERT((uint32_t) pvParameters == 1UL);

    for (;;)
    {
        // Task code goes here.
    }
}

// Function that creates the task.
void vOtherFunction(void)
{
    TaskHandle_t xHandle = NULL;

    // Create the task without using any dynamic memory allocation.
    xHandle = xTaskCreateStatic(
        vTaskCode,          // Function that implements the task.
        "NAME",             // Text name for the task.
        STACK_SIZE,         // Stack size in words, not bytes.
        (void *) 1,         // Parameter passed into the task.
        tskIDLE_PRIORITY,   // Priority at which the task is created.
        xStack,             // Array to use as the task's stack.
        &xTaskBuffer        // Variable to hold the task's data structure.
    );

    // puxStackBuffer and pxTaskBuffer were not NULL,
    // so the task will have been created,
    // and xHandle will be the task's handle.
    // Use the handle to suspend the task.
    vTaskSuspend(xHandle);
}

b:["slug","cours-md","d"]
0:["OndCkgYiz6_LrGL1nuWc2",[[["",{"children":["knowledge-hub",{"children":[["slug","cours-md","d"],{"children":["__PAGE__?{\"slug\":\"cours-md\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["knowledge-hub",{"children":[["slug","cours-md","d"],{"children":["__PAGE__",{},[["$L1",["$","main",null,{"className":"min-h-screen bg-background","children":[["$","$L2",null,{}],["$","article",null,{"className":"py-20 pt-32","children":["$","div",null,{"className":"container mx-auto px-4 max-w-4xl","children":[["$","div",null,{"className":"mb-8","children":["$","$L3",null,{"href":"/knowledge-hub/","children":["$","button",null,{"className":"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 gap-2","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"Back to Knowledge Hub"]}]}]}],["$","div",null,{"className":"bg-card p-8 rounded-lg shadow-sm","children":[["$","div",null,{"className":"mb-6","children":[["$","h1",null,{"className":"text-3xl font-bold mb-4","children":"Introduction to Embedded Systems and FreeRTOS"}],["$","div",null,{"className":"flex items-center gap-2 text-muted-foreground mb-4","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2025-07-29"}]]}],["$","div",null,{"className":"flex flex-wrap gap-2 mb-6","children":[["$","$L3","Embedded",{"href":"/tags/Embedded/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Embedded"]}]}],["$","$L3","Systems",{"href":"/tags/Systems/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Systems"]}]}],["$","$L3","FreeRTOS",{"href":"/tags/FreeRTOS/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"FreeRTOS"]}]}],["$","$L3","Microcontrollers",{"href":"/tags/Microcontrollers/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Microcontrollers"]}]}],["$","$L3","Real-Time",{"href":"/tags/Real-Time/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Real-Time"]}]}],["$","$L3","Systems",{"href":"/tags/Systems/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Systems"]}]}],["$","$L3","IoT",{"href":"/tags/IoT/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"IoT"]}]}],["$","$L3","English",{"href":"/tags/English/","children":["$","div",null,{"className":"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"English"]}]}]]}],["$","div",null,{"className":"bg-muted/30 p-4 rounded-lg mb-6","children":["$","p",null,{"className":"italic","children":"Overview of embedded systems, their hardware/software components, and the use of FreeRTOS kernel for real-time task management."}]}]]}],["$","div",null,{"className":"markdown max-w-none","children":[["$","p","p-0",{"children":"Based on the FreeRTOS kernel"}],"\n",["$","p","p-1",{"children":"Embedded system are material but also software. They can be brake system in cars, acceleration systeme etc... We don't need to use a traditional CPU to create them. Most of the time it's used by microcontroller. The design of those system is made for the application. Each task are limited to realize."}],"\n",["$","h2","h2-0",{"children":"Physical components"}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Microcontroller"}],"\n",["$","li","li-1",{"children":"Memory (integrated or external)"}],"\n",["$","li","li-2",{"children":"Captors"}],"\n",["$","li","li-3",{"children":"Actuator"}],"\n",["$","li","li-4",{"children":"Communication (RS23 for TP)"}],"\n",["$","li","li-5",{"children":"Converter analog"}],"\n",["$","li","li-6",{"children":"Electrical supply"}],"\n",["$","li","li-7",{"children":["HMI",["$","br","br-0",{}],"\nEmbedded System Structure",["$","br","br-1",{}],"\n",["$","img","img-0",{"src":"Structure%20Embedded%20System.png","alt":"Structure Embedded System"}]]}],"\n"]}],"\n",["$","h3","h3-0",{"children":"Design Hints"}],"\n",["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":["Mostlu fast response time\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"0.01s to tens of micros"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Smallest cost\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Less Components"}],"\n",["$","li","li-1",{"children":"Smallest Area"}],"\n",["$","li","li-2",{"children":"Only needed resources"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":"Best Performance/cost ratio"}],"\n",["$","li","li-3",{"children":"Portability"}],"\n",["$","li","li-4",{"children":["Low power\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Battery kife"}],"\n"]}],"\n"]}],"\n",["$","li","li-5",{"children":"Maintainability"}],"\n"]}],"\n",["$","h3","h3-1",{"children":"Design Activiteis"}],"\n",["$","ul","ul-2",{"children":["\n",["$","li","li-0",{"children":["System specification\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Functions, Time constraintsm Cost and Power constraints"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"Hardware Software Partitioning"}],"\n",["$","li","li-2",{"children":"Hardawre synsthesis"}],"\n",["$","li","li-3",{"children":"Software synsthesis and code generation"}],"\n",["$","li","li-4",{"children":"Simulation"}],"\n",["$","li","li-5",{"children":"implementation"}],"\n",["$","li","li-6",{"children":"test"}],"\n",["$","li","li-7",{"children":"deployment"}],"\n"]}],"\n",["$","h3","h3-2",{"children":"Design management"}],"\n",["$","p","p-2",{"children":"Different models for those system"}],"\n",["$","ul","ul-3",{"children":["\n",["$","li","li-0",{"children":"Water fall model"}],"\n",["$","li","li-1",{"children":"V-model"}],"\n",["$","li","li-2",{"children":"W model"}],"\n",["$","li","li-3",{"children":"Spiral model"}],"\n",["$","li","li-4",{"children":["Cascade",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Waterfall%20Model.png","alt":"Waterfall Model"}]]}],"\n"]}],"\n",["$","h3","h3-3",{"children":"V Model"}],"\n",["$","p","p-3",{"children":["$","img","img-0",{"src":"V%20Model.png","alt":"V Model"}]}],"\n",["$","ul","ul-4",{"children":["\n",["$","li","li-0",{"children":"Top Down design"}],"\n",["$","li","li-1",{"children":"Completion of a design activity is required to start the following one"}],"\n"]}],"\n",["$","h4","h4-0",{"children":"V model activities relationship"}],"\n",["$","ul","ul-5",{"children":["\n",["$","li","li-0",{"children":["Step by Step design\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Top Down"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"Correspondence with tests"}],"\n",["$","li","li-2",{"children":["Each step has base documents",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"V%20model%20activities%20relations.png","alt":"V model activities relations"}]]}],"\n"]}],"\n",["$","h4","h4-1",{"children":"V model documentation"}],"\n",["$","ul","ul-6",{"children":["\n",["$","li","li-0",{"children":"Design documents"}],"\n",["$","li","li-1",{"children":["Tests documents",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"V%20model%20documentation.png","alt":"V model documentation"}]]}],"\n"]}],"\n",["$","h2","h2-1",{"children":"How to describe the behavior of a complex system ?"}],"\n",["$","h3","h3-4",{"children":"Structured Analysis"}],"\n",["$","h4","h4-2",{"children":"Structure modeling methods examples"}],"\n",["$","ul","ul-7",{"children":["\n",["$","li","li-0",{"children":["UML / UML-RT\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Object oriented description"}],"\n",["$","li","li-1",{"children":"RT for real time considerations"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["SADT (Structured Analysis and Design Technique)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Functional data flow-oriented design approach"}],"\n",["$","li","li-1",{"children":"Simple method"}],"\n",["$","li","li-2",{"children":"No time considerations"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["SA (Structured Analysis by Yourdon & Demarco)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Similar concecpts of SADT\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Different formalism"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["SA-RT with time considerations for real-time systems\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Add control flow, state diagrams"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["Merise\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Used for information systems design"}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":"Agile methods"}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["SA-RT usage\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"System specifications"}],"\n",["$","li","li-1",{"children":"Software specifications"}],"\n",["$","li","li-2",{"children":"Software logical architecture"}],"\n",["$","li","li-3",{"children":"Software dynamical architecture"}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["Two dialects\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"WARD & MELLOR"}],"\n",["$","li","li-1",{"children":"HATLEY PIRBHAI"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2","h2-2",{"children":"Structure analysis objective"}],"\n",["$","ul","ul-8",{"children":["\n",["$","li","li-0",{"children":["System partitining\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Top down system description"}],"\n",["$","li","li-1",{"children":["The latest level is a basic function",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Simple%20structure%20analysis%20example.png","alt":"Simple structure analysis example"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2","h2-3",{"children":"Structure Analysis Concepts"}],"\n",["$","h3","h3-5",{"children":"Process (data transformation)"}],"\n",["$","ul","ul-9",{"children":["\n",["$","li","li-0",{"children":"Activities that trasnform data"}],"\n",["$","li","li-1",{"children":"linked by dataflow to other processes, data store, and external entities"}],"\n"]}],"\n",["$","h3","h3-6",{"children":"Data flow"}],"\n",["$","ul","ul-10",{"children":["\n",["$","li","li-0",{"children":"Indicate transfer of data from output of one entity to input of another"}],"\n",["$","li","li-1",{"children":"represent a data group or data element"}],"\n"]}],"\n",["$","h3","h3-7",{"children":"Data store"}],"\n",["$","ul","ul-11",{"children":["\n",["$","li","li-0",{"children":"a place where data is held for later use"}],"\n",["$","li","li-1",{"children":"data stores are passive: no transformations are performed on the data"}],"\n"]}],"\n",["$","h3","h3-8",{"children":"External entity"}],"\n",["$","ul","ul-12",{"children":["\n",["$","li","li-0",{"children":"An activity outside the target system"}],"\n",["$","li","li-1",{"children":"Acts as source or destination for dataflow that cross the system boundary"}],"\n",["$","li","li-2",{"children":"External entities cannot interact directly with data stores"}],"\n"]}],"\n",["$","h3","h3-9",{"children":"Data group"}],"\n",["$","ul","ul-13",{"children":["\n",["$","li","li-0",{"children":"A cluster of data represented as a singel dataflow"}],"\n",["$","li","li-1",{"children":"consits of lower level data groups, or individual elements"}],"\n"]}],"\n",["$","h3","h3-10",{"children":"Data element"}],"\n",["$","ul","ul-14",{"children":["\n",["$","li","li-0",{"children":"A basic unit of data"}],"\n"]}],"\n",["$","h2","h2-4",{"children":"Structured Analysis tools"}],"\n",["$","ul","ul-15",{"children":["\n",["$","li","li-0",{"children":"Context diagram"}],"\n",["$","li","li-1",{"children":"Data flow diagram"}],"\n",["$","li","li-2",{"children":"Data dictionary"}],"\n",["$","li","li-3",{"children":"Primitive Process Specification"}],"\n",["$","li","li-4",{"children":"Structured Walkthrough (description)"}],"\n"]}],"\n",["$","h2","h2-5",{"children":"Real -time analysis tools"}],"\n",["$","ul","ul-16",{"children":["\n",["$","li","li-0",{"children":"Control"}],"\n",["$","li","li-1",{"children":"COntrol specification"}],"\n"]}],"\n",["$","h3","h3-11",{"children":"Context diagram"}],"\n",["$","ul","ul-17",{"children":["\n",["$","li","li-0",{"children":"Gives the main aim of the system (highest view)"}],"\n",["$","li","li-1",{"children":"identify the external entities with witch it will communicate"}],"\n",["$","li","li-2",{"children":"Usually controls and data joined in the same diagram"}],"\n"]}],"\n",["$","p","p-4",{"children":[["$","img","img-0",{"src":"Context%20diagram%20example.png","alt":"Context diagram example"}],["$","br","br-0",{}],"\n",["$","img","img-1",{"src":"Legend%20for%20context%20diagram.png","alt":"Legend for context diagram"}]]}],"\n",["$","h3","h3-12",{"children":"Data Flow diagram"}],"\n",["$","ul","ul-18",{"children":["\n",["$","li","li-0",{"children":["The system (PROCESS 0) is described with DFD 0\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"The main dataflow"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Split the unique process into several ideentified processes\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Identified by a verb and an object"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["Terminal processes are described by a specification\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["THe functional primitives",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Example%20data%20flow.png","alt":"Example data flow"}],["$","br","br-1",{}],"\n",["$","img","img-1",{"src":"Legend%20data%20flow.png","alt":"Legend data flow"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3","h3-13",{"children":"Store / Reservoir"}],"\n",["$","ul","ul-19",{"children":["\n",["$","li","li-0",{"children":"Configuration constants"}],"\n",["$","li","li-1",{"children":["Asynchronous communication elements",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Store%20example.png","alt":"Store example"}]]}],"\n"]}],"\n",["$","h3","h3-14",{"children":"Data dictionary"}],"\n",["$","ul","ul-20",{"children":["\n",["$","li","li-0",{"children":"Defines each data elemetn and data group"}],"\n",["$","li","li-1",{"children":"Use of BNF (Backus-Naur Form) to define structured data groups"}],"\n"]}],"\n",["$","h4","h4-3",{"children":"Examples"}],"\n",["$","p","p-5",{"children":["Mailing Label =",["$","br","br-0",{}],"\ncustomer_name + customer_address",["$","br","br-1",{}],"\ncustomer_name =",["$","br","br-2",{}],"\ncustomer_last_name + customer_first_name + customer_middle_initial",["$","br","br-3",{}],"\ncustomer_address =",["$","br","br-4",{}],"\nlocal_address + community_address + zip_code",["$","br","br-5",{}],"\nlocal_address =",["$","br","br-6",{}],"\nhouse_number + street_name + (apt_number)",["$","br","br-7",{}],"\ncommunity address =",["$","br","br-8",{}],"\ncity_name + [state_name | province_name]"]}],"\n",["$","h3","h3-15",{"children":"DFD structure"}],"\n",["$","p","p-6",{"children":["$","img","img-0",{"src":"DFD%20Structure.png","alt":"DFD Structure"}]}],"\n",["$","h3","h3-16",{"children":"PSPEC to describe a primitive process"}],"\n",["$","ul","ul-21",{"children":["\n",["$","li","li-0",{"children":"Process SPECification"}],"\n",["$","li","li-1",{"children":["Usually one page size",["$","br","br-0",{}],"\nIN = AUTRE FLOT DONNEE",["$","br","br-1",{}],"\nIN = FLOT DE DONNEE EN ENTREE",["$","br","br-2",{}],"\nIN = PARTIE A",["$","br","br-3",{}],"\nOUT = AUTRE INFORMATION",["$","br","br-4",{}],"\nPSPEC F 1.1",["$","br","br-5",{}],"\n-- AUTRE FLOT DONNEE SI \"AUTRE FLOT DONNEE\" = \"FLOT DE DONNEE EN ENTREE\" ALORS ENVOYER \"AUTRE INFORMATION\" FIN SI",["$","br","br-6",{}],"\n",["$","img","img-0",{"src":"Example%20SPEC.png","alt":"Example SPEC"}]]}],"\n"]}],"\n",["$","h4","h4-4",{"children":"PSPEC of a vending system"}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"children":"FOR EACH Shipped-order-detail \n\tGET customer-name + customer-address \n\tFOR EACH part-shipped \n\t\tGET retail-price \n\t\tMULTIPLY retail-price by quantity-shipped \n\t\tTO OBTAIN total-this-order \nCALCULATE shipping-and-handling \nADD shipping-and-handling TO total-this-order \n\tTO OBTAIN total-this-invoice \nPRINT invoice\n"}]}],"\n",["$","h3","h3-17",{"children":"Dynamical behavior model (RT Part)"}],"\n",["$","p","p-7",{"children":["$","img","img-0",{"src":"Dynamical%20behavior%20Model.png","alt":"Dynamical behavior Model"}]}],"\n",["$","h3","h3-18",{"children":"In practice"}],"\n",["$","ul","ul-22",{"children":["\n",["$","li","li-0",{"children":["Decompose the systeme process into his main fucntions (from 3to 7)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"LEvel 1 processes will become the kernel tasks"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Place the data flow coming from the higher level diagram on the sub functions\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"if a flow is split at this level, notice it in the dictionary : (a=b+c)"}],"\n",["$","li","li-1",{"children":["If the processes don't execute continuously, place a CSPEC on the diagram\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Put the controls that activate and deactivate the processes of this level"}],"\n",["$","li","li-1",{"children":"Define the CSPEC"}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":"Add internal flow(data or controls) between processes"}],"\n",["$","li","li-3",{"children":"dd sotre elemetns"}],"\n",["$","li","li-4",{"children":"define the PSPECS of the terminal processes"}],"\n",["$","li","li-5",{"children":"Do it again for each decomposed process"}],"\n"]}],"\n",["$","h4","h4-5",{"children":"Example"}],"\n",["$","ul","ul-23",{"children":["\n",["$","li","li-0",{"children":["A booking system with :\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"A user interface"}],"\n",["$","li","li-1",{"children":"An information system interface"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Function\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"The customer choose on e itierary and the date and get a ticket"}],"\n",["$","li","li-1",{"children":["The reservation system holds the reservation",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Example%20Architecture%20of%20processes.png","alt":"Example Architecture of processes"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-6",{"children":"Additional design considerations"}],"\n",["$","ul","ul-24",{"children":["\n",["$","li","li-0",{"children":["Choose the well suited logic system\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Microprocessor/microcontroller"}],"\n",["$","li","li-1",{"children":"CPLD/FPGA or ASICs"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Realize the best hardware/software partition\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Software gives flexibility\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Is cost investment"}],"\n",["$","li","li-1",{"children":"has memory size impact"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Hardware gives performance and security\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Is cost recurrent"}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":"Choose the devlopment tools"}],"\n"]}],"\n",["$","h1","h1-0",{"children":"Hardware Equipment"}],"\n",["$","p","p-8",{"children":["-72MHz STM32F107VC ARM Cortex™",["$","br","br-0",{}],"\n-M3 processorbased MCU in 100-pin LQFP",["$","br","br-1",{}],"\n-On-Chip Memory: 256KB Flash & 64KB RAM",["$","br","br-2",{}],"\n-External Memory: 8KB I2C Flash -Color QVGA TFT LCD with touchscreen",["$","br","br-3",{}],"\n-10/100 Ethernet Port -USB 2.0 Full Speed"]}],"\n",["$","ul","ul-25",{"children":["\n",["$","li","li-0",{"children":"USB, USB-OTG, & USB Host"}],"\n",["$","li","li-1",{"children":"-2 CAN Interfaces"}],"\n",["$","li","li-2",{"children":"-Serial/UART Port -MicroSD Card Interface"}],"\n",["$","li","li-3",{"children":"-5-position Joystick and push-button"}],"\n",["$","li","li-4",{"children":"-3-axis Motion sensor / Accelerometer"}],"\n",["$","li","li-5",{"children":"-Analog Voltage Control for ADC Input"}],"\n",["$","li","li-6",{"children":"-Audio CODEC with Line-In/Out and Speaker"}],"\n",["$","li","li-7",{"children":"-80 GPIO pins"}],"\n",["$","li","li-8",{"children":["Debug Interface Connectors\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"20 pin JTAG (0.1 inch connector)"}],"\n",["$","li","li-1",{"children":"10 pin Cortex debug (0.05 inch connector)"}],"\n",["$","li","li-2",{"children":["20-pin Cortex debug + ETM Trace (0.05 inch connector)",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"STMMicroelectronics%20Processor.png","alt":"STMMicroelectronics Processor"}],["$","br","br-1",{}],"\n",["$","img","img-1",{"src":"MCBSTM32C%20board%20peripherals.png","alt":"MCBSTM32C board peripherals"}],["$","br","br-2",{}],"\n",["$","img","img-2",{"src":"MCBSTM32C%20schematics.png","alt":"MCBSTM32C schematics"}],["$","br","br-3",{}],"\n",["$","img","img-3",{"src":"MCBSTM32C%20schematics%20(GPIO%20and%20serial%20communication).png","alt":"MCBSTM32C schematics (GPIO and serial communication)"}],["$","br","br-4",{}],"\n",["$","img","img-4",{"src":"MCBSTM32C%20Schematic%20(Power%20&%20RS232).png","alt":"MCBSTM32C Schematic (Power & RS232)"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h1","h1-1",{"children":"Development tool chain"}],"\n",["$","h2","h2-6",{"children":"Keil IDE"}],"\n",["$","p","p-9",{"children":"The Keil IDE is a cross graphical development environment including :"}],"\n",["$","ul","ul-26",{"children":["\n",["$","li","li-0",{"children":"a source code editor"}],"\n",["$","li","li-1",{"children":"a project manager"}],"\n",["$","li","li-2",{"children":"a cross compiler tool chain"}],"\n",["$","li","li-3",{"children":"a source level debugger • an ARM simulator"}],"\n"]}],"\n",["$","p","p-10",{"children":[["$","img","img-0",{"src":"Keil%20IDE.png","alt":"Keil IDE"}],["$","br","br-0",{}],"\n",["$","img","img-1",{"src":"KEIL%20interface.png","alt":"KEIL interface"}]]}],"\n",["$","h3","h3-19",{"children":"Software development tool"}],"\n",["$","h3","h3-20",{"children":"Software debug tool (Not used)"}],"\n",["$","h2","h2-7",{"children":"Segger JTAG debg solution"}],"\n",["$","p","p-11",{"children":"JtagJet is a JTAG emulator for the ARM Cortex M architectures."}],"\n",["$","ul","ul-27",{"children":["\n",["$","li","li-0",{"children":"Chameleon : the associated software tool."}],"\n",["$","li","li-1",{"children":["Allow source level debug in C and assembly (ARM and THUMB2 (16/32 bit instructions))",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"JTAGJet.png","alt":"JTAGJet"}],["$","br","br-1",{}],"\n",["$","img","img-1",{"src":"Cortex%20M3%20Characteristics.png","alt":"Cortex M3 Characteristics"}]]}],"\n"]}],"\n",["$","h3","h3-21",{"children":"Hardware debugger (Jlink)"}],"\n",["$","h3","h3-22",{"children":"Keil software debugger"}],"\n",["$","p","p-12",{"children":"STM32F10x"}],"\n",["$","ul","ul-28",{"children":["\n",["$","li","li-0",{"children":["CPU ARM cortex MR\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"ALU works on registres"}],"\n",["$","li","li-1",{"children":["$","img","img-0",{"src":"Arm%20CORTEX%20M3.png","alt":"Arm CORTEX M3"}]}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["CPU registers\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Grey : accesible in privileged mode"}],"\n",["$","li","li-1",{"children":[["$","img","img-0",{"src":"CPU%20registers.png","alt":"CPU registers"}],["$","br","br-0",{}],"\n",["$","img","img-1",{"src":"Register%20use%20in%20C%20language.png","alt":"Register use in C language"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h1","h1-2",{"children":"Designing a real time embedded system"}],"\n",["$","h2","h2-8",{"children":"Sever consequences if"}],"\n",["$","ul","ul-29",{"children":["\n",["$","li","li-0",{"children":"logical correctness is not met"}],"\n",["$","li","li-1",{"children":"Timing constraintes are not met"}],"\n"]}],"\n",["$","h2","h2-9",{"children":"Two types of real-time systems"}],"\n",["$","ul","ul-30",{"children":["\n",["$","li","li-0",{"children":"Soft real time (as fast as possible)"}],"\n",["$","li","li-1",{"children":"Hard real-time (must be on time)"}],"\n"]}],"\n",["$","h2","h2-10",{"children":"Mostly, real-time systems are embeded"}],"\n",["$","ul","ul-31",{"children":["\n",["$","li","li-0",{"children":"Build around one or more microcontrollers"}],"\n",["$","li","li-1",{"children":"Not seen by the user as a computer"}],"\n"]}],"\n",["$","h3","h3-23",{"children":"Real time system example"}],"\n",["$","ul","ul-32",{"children":["\n",["$","li","li-0",{"children":"Process flow control"}],"\n",["$","li","li-1",{"children":"Automotive"}],"\n",["$","li","li-2",{"children":"robots"}],"\n",["$","li","li-3",{"children":"communications"}],"\n",["$","li","li-4",{"children":"compter peripherals"}],"\n",["$","li","li-5",{"children":"aerospace"}],"\n",["$","li","li-6",{"children":"domestic"}],"\n",["$","li","li-7",{"children":"IoT applications"}],"\n"]}],"\n",["$","h3","h3-24",{"children":"Complexity"}],"\n",["$","p","p-13",{"children":"Very small size systems"}],"\n",["$","ul","ul-33",{"children":["\n",["$","li","li-0",{"children":"Mostlu 8bit microcontrollers with little memory (<128 Kb flash & <1 Kb Ram)"}],"\n",["$","li","li-1",{"children":["Software developed with a background / foreground scheme (BFS)",["$","br","br-0",{}],"\nSmall size systems"]}],"\n",["$","li","li-2",{"children":"High end 8 bits, 16bits and low end 32bits microC (up to 1Mb flash & up to 2 Mb oif Ram)"}],"\n",["$","li","li-3",{"children":["BFS software or small or propietaryu real-time kernel(no royalties)",["$","br","br-0",{}],"\nMiddle to big size systems"]}],"\n",["$","li","li-4",{"children":"32bits microC(up to 4Mb flash & up to 8Mb Ram)"}],"\n",["$","li","li-5",{"children":["Commercial real-time kernels with debug tools, file systems, network,...",["$","br","br-0",{}],"\nHigh end size systems"]}],"\n",["$","li","li-6",{"children":"PC like systems with scalable resources"}],"\n",["$","li","li-7",{"children":["Use an operating system like Linux or equivalent",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Product%20without%20kernel.png","alt":"Product without kernel"}]]}],"\n"]}],"\n",["$","pre","pre-1",{"children":["$","code","code-0",{"className":"language-Background","children":"/* Background */\nvoid main(void)\n{\n    Initialization;\n\n    while (1)  // FOREVER loop\n    {\n        Read_Analog_Inputs();\n        Read_Discrete_Inputs();\n        Perform_Monitoring_Functions();\n        Perform_Control_Functions();\n        Update_Analog_Outputs();\n        Update_Discrete_Outputs();\n        Scan_Keyboard();\n        Handle_User_Interface();\n        Update_Display();\n        Handle_Communication_Requests();\n        // Other...\n    }\n}\n\n/* Foreground */\nISR(void)\n{\n    Handle_Asynchronous_Event();\n}\n"}]}],"\n",["$","ul","ul-34",{"children":["\n",["$","li","li-0",{"children":"The main problem with this type of architecture is that the response time in the background part is not deterministric"}],"\n",["$","li","li-1",{"children":"Tasks have not always the same duration"}],"\n",["$","li","li-2",{"children":["In case of a code change in the loop the global loop timing is modified",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Infitinite%20loop.png","alt":"Infitinite loop"}]]}],"\n"]}],"\n",["$","h4","h4-7",{"children":"Why use a real time kernel ?"}],"\n",["$","ul","ul-35",{"children":["\n",["$","li","li-0",{"children":"To guarantee a better temporal response on an asynchronous real time event"}],"\n",["$","li","li-1",{"children":"To be able to affect priorities to the different functions executed by the CPU"}],"\n",["$","li","li-2",{"children":"TO ease the adding of functionalities to the system"}],"\n",["$","li","li-3",{"children":"TO reduce the development time"}],"\n",["$","li","li-4",{"children":"TO easily ashare the dev of the application between several progeammers"}],"\n",["$","li","li-5",{"children":"To ease the software documentation"}],"\n"]}],"\n",["$","h4","h4-8",{"children":"Real time copncepts"}],"\n",["$","ul","ul-36",{"children":["\n",["$","li","li-0",{"children":["Critical sections of code (criticatl region)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Code that need to be treated indivisibly (must not be interrupted)"}],"\n",["$","li","li-1",{"children":"Specific actions are done before entering in the critical region"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Resources\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Entity used by a task it may be memory or I/Os"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["Shared resources\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Resource that can be used by one or more tasks"}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["Tasks\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"A simpel program that thinks it has the CPU for itself"}],"\n",["$","li","li-1",{"children":"Each task has a priority, its own registers an its own stack"}],"\n",["$","li","li-2",{"children":"IT can be in any of the following states: dormant, ready, running, waiting (for an event) or ISR (interrupted)"}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["Multitasking\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Process of scheduling and switching the CPU between several tasks"}],"\n",["$","li","li-1",{"children":"Tasks scheduling"}],"\n"]}],"\n"]}],"\n",["$","li","li-5",{"children":["Mutual exclusion and semaphores\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Used to share common resources",["$","br","br-0",{}],"\nMutitasking 1/2 :",["$","br","br-1",{}],"\n",["$","img","img-0",{"src":"Multiple%20tasks.png","alt":"Multiple tasks"}],["$","br","br-2",{}],"\nSwitch tasks operations"]}],"\n"]}],"\n"]}],"\n",["$","li","li-6",{"children":"Save the CPU registers in the current Task Control Bloc"}],"\n",["$","li","li-7",{"children":"Recover the new task data from the TCB"}],"\n",["$","li","li-8",{"children":"Resume the new task"}],"\n",["$","li","li-9",{"children":"Tasks switches add overhead to the application (up to 5% of CPU time for well design appliucations)"}],"\n"]}],"\n",["$","h4","h4-9",{"children":"Multitasking scheduling"}],"\n",["$","ul","ul-37",{"children":["\n",["$","li","li-0",{"children":["Round-Robin Scheduling\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"No tasks priorites"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"Static priorities: do not change during execution of task"}],"\n",["$","li","li-2",{"children":["In rate Monotonic Scheduling(RM)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Tasks with the highest rate of execution are given the highest priority"}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["Dynamic priorities\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"to remedy priority inversion"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-10",{"children":"Tasks states"}],"\n",["$","ul","ul-38",{"children":["\n",["$","li","li-0",{"children":"Ready"}],"\n",["$","li","li-1",{"children":"Running"}],"\n",["$","li","li-2",{"children":"Suspended"}],"\n",["$","li","li-3",{"children":["Blocked",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Tasks%20states.png","alt":"Tasks states"}]]}],"\n"]}],"\n",["$","h4","h4-11",{"children":"Non preemptive kernel behavior"}],"\n",["$","p","p-14",{"children":["$","img","img-0",{"src":"Non%20preemptive%20kernel%20behavior.png","alt":"Non preemptive kernel behavior"}]}],"\n",["$","ul","ul-39",{"children":["\n",["$","li","li-0",{"children":["Tasks must explicitly do something to give control to the kernel\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"This must be done frequently"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"So called cooperative multitasking"}],"\n",["$","li","li-2",{"children":["Each task can run up to completion\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"No need of reetrant fuctnions"}],"\n",["$","li","li-1",{"children":"Small interrupt latency"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-12",{"children":"Preemptive Kernel behavior"}],"\n",["$","p","p-15",{"children":["$","img","img-0",{"src":"Preemptive%20Kernel%20behavior.png","alt":"Preemptive Kernel behavior"}]}],"\n",["$","ul","ul-40",{"children":["\n",["$","li","li-0",{"children":["The highest priority task ready to run is always given the CPU\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"When an ISR makes an higher priority task ready, at the end of th3e ISR the interruypted task is suspended and the new higher priority task resumed"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"So called preemptive multitasking"}],"\n",["$","li","li-2",{"children":["Each task may be interrupted\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Need of reetrant functions\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Can use global but protected variable"}],"\n",["$","li","li-1",{"children":"Locals variables and parameters are preferred"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"Interrupt latency is higher"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h1","h1-3",{"children":"FreeRTOS"}],"\n",["$","p","p-16",{"children":"Created in 2003 by Richard Barry and maintained by Real Time Engineers Ltd."}],"\n",["$","ul","ul-41",{"children":["\n",["$","li","li-0",{"children":"OpenRTOS : Commercial grade with USB,TCP/IP and FAT"}],"\n",["$","li","li-1",{"children":["SafeRTOS : for Critical systems",["$","br","br-0",{}],"\nSince 2017 maintained by Amazon Web Services"]}],"\n",["$","li","li-2",{"children":"FreeRTOS for IoT"}],"\n",["$","li","li-3",{"children":["Completed with commercial services",["$","br","br-0",{}],"\nFreeRTOS is a portable, modular multitask real time kernel"]}],"\n",["$","li","li-4",{"children":"More than 20 silicon manufacturers"}],"\n",["$","li","li-5",{"children":["many device families for each",["$","br","br-0",{}],"\nFreeRTOS provides services for embedded applications"]}],"\n",["$","li","li-6",{"children":"Resources sharing"}],"\n",["$","li","li-7",{"children":"Delays"}],"\n",["$","li","li-8",{"children":["Inter-tasks communication and synchronization mechanisms",["$","br","br-0",{}],"\nFreeRtos is ROMMABLE"]}],"\n",["$","li","li-9",{"children":"4 to 9Kb size"}],"\n",["$","li","li-10",{"children":["Used on embedded systems",["$","br","br-0",{}],"\nFreeRtos well suited for IoT applications (Amazon, Nabto, ...)"]}],"\n"]}],"\n",["$","p","p-17",{"children":"Main characteristics of the FreeRtos real time kernel"}],"\n",["$","ul","ul-42",{"children":["\n",["$","li","li-0",{"children":"Creatio and mangement of virtually unlimited number of tasks in the hardware limit"}],"\n",["$","li","li-1",{"children":"Tasks waiting functions"}],"\n",["$","li","li-2",{"children":"Change of tasks priorities"}],"\n",["$","li","li-3",{"children":"Deletion of Tasks"}],"\n",["$","li","li-4",{"children":"Tasks suspension and resume"}],"\n",["$","li","li-5",{"children":"Creation and management of numerical and binary semaphores"}],"\n",["$","li","li-6",{"children":"sending of messages queues from interrupt function (ISR) or from task to an other task"}],"\n",["$","li","li-7",{"children":["Round-Robin scheduling : if 2 or more tasks have the same priority\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Each tasks takes turns to run"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3","h3-25",{"children":"What does it do?"}],"\n",["$","p","p-18",{"children":"Rate Monotonic Scheduling (RMS)"}],"\n",["$","ul","ul-43",{"children":["\n",["$","li","li-0",{"children":["tasks with the highest rate of executionn have the highest priority",["$","br","br-0",{}],"\nDEadline-Monotonic Scheduling(DMS)"]}],"\n",["$","li","li-1",{"children":["Periodic tasks with shortest deadline have highest priority",["$","br","br-0",{}],"\nEarliest Deadline First (EDF)"]}],"\n",["$","li","li-2",{"children":["The periodic task with earliest deadline will get highest priority (dynamic priority scheduling)",["$","br","br-0",{}],"\nOnly possible with additianl libraries"]}],"\n",["$","li","li-3",{"children":"ESFree"}],"\n"]}],"\n",["$","h2","h2-11",{"children":"FreeRTOS port & components"}],"\n",["$","h3","h3-26",{"children":"Ports"}],"\n",["$","p","p-19",{"children":"Rules required to implement an RTOS on a micrcontroller"}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":"Have a C compiler that generates nesting code (preemptive RTOS)"}],"\n",["$","li","li-1",{"children":"THe microcontroller supports interrupts and a peridical interrupt is available(10 to 1KHz)"}],"\n",["$","li","li-2",{"children":"The interrupts mayu be deactivated by software"}],"\n",["$","li","li-3",{"children":"The processor can manage a hardware stack (some Kb min)"}],"\n",["$","li","li-4",{"children":["The processor has instruction to save and restore CPU registers in the stack (SP,PC and general registers)",["$","br","br-0",{}],"\nStructure of a FreeRTOS application :",["$","br","br-1",{}],"\n",["$","img","img-0",{"src":"Structure%20of%20a%20FreeRTOS%20application.png","alt":"Structure of a FreeRTOS application"}],["$","br","br-2",{}],"\nKernel Structure",["$","br","br-3",{}],"\n",["$","img","img-1",{"src":"Kernel%20Structure.png","alt":"Kernel Structure"}]]}],"\n"]}],"\n",["$","h4","h4-13",{"children":"PRIMASK Register"}],"\n",["$","p","p-20",{"children":"THis register allow blocking exceptions"}],"\n",["$","ul","ul-44",{"children":["\n",["$","li","li-0",{"children":"Only exceptions with configurable priority"}],"\n",["$","li","li-1",{"children":["One bit implemented\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["All priority configurable exceptions will be blocked",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"PRIMASK.png","alt":"PRIMASK"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-14",{"children":"Stack & Stack pointer"}],"\n",["$","p","p-21",{"children":"The Cortex M3 CPU manage a hardware stack"}],"\n",["$","ul","ul-45",{"children":["\n",["$","li","li-0",{"children":"The stack acts as a LIFO (of words)"}],"\n",["$","li","li-1",{"children":["A specific register SP (Stack POINTER is used to maintain the stack\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["SP countains the memory address of the last words in the stack",["$","br","br-0",{}],"\nThe SP register may be modifed for the programming purposes"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["SP(=R13)",["$","br","br-0",{}],"\nExample :"]}],"\n",["$","li","li-3",{"children":["putting a word in the stack (PUSH)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"SP value is decreadsed with the objkect size to be pushed(multiple of 4 bytes)"}],"\n",["$","li","li-1",{"children":"Write the data at SP content address"}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["To free the stack from the data\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Increase the SP value with size of the data to be removed (multiples of 4 bytes)",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Stack.png","alt":"Stack"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-15",{"children":"Processors exceptions"}],"\n",["$","p","p-22",{"children":"Possibility for the CPU to change is execution context on :"}],"\n",["$","ul","ul-46",{"children":["\n",["$","li","li-0",{"children":"Internal errors"}],"\n",["$","li","li-1",{"children":"Special Instruction"}],"\n",["$","li","li-2",{"children":["External events\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Communciations, timers",["$","br","br-0",{}],"\nExecution is passed to a dedicated function"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":"Independant from user code"}],"\n",["$","li","li-4",{"children":["Communication thru global variables",["$","br","br-0",{}],"\nSpecial Considerations"]}],"\n",["$","li","li-5",{"children":"Up to 16 priority levels"}],"\n",["$","li","li-6",{"children":"Exception can be interrupted by a higher priority exception"}],"\n",["$","li","li-7",{"children":["Context switch may be time consuming (regarding memory speed)",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Processor%20exceptions.png","alt":"Processor exceptions"}],["$","br","br-1",{}],"\n",["$","img","img-1",{"src":"Exceptions.png","alt":"Exceptions"}]]}],"\n"]}],"\n",["$","h3","h3-27",{"children":"Material ressources"}],"\n",["$","h4","h4-16",{"children":"FreeRTOS Cortex port"}],"\n",["$","p","p-23",{"children":"Use a specifi interrupts"}],"\n",["$","ul","ul-47",{"children":["\n",["$","li","li-0",{"children":["SysTick (preemptive RTOS mode)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"time base (timer interrupt) for the RTOS"}],"\n",["$","li","li-1",{"children":"1 kHz or 100 Hz typic.  May be repaced by other timer."}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["PendSV (Pendable SerVice)",["$","br","br-0",{}],"\n- used by the OS to force a context switch."]}],"\n",["$","li","li-2",{"children":["SVCall (SuperVisor Call)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"triggered by the SVC instruction"}],"\n",["$","li","li-1",{"children":["used by FreeRTOS to start the scheduler.",["$","br","br-0",{}],"\nRTOS interrupts priorities"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":"Lowest priority"}],"\n",["$","li","li-4",{"children":["Other interrupts may have higher priorities",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"FreeRTOS%20interrupts%20ressources.png","alt":"FreeRTOS interrupts ressources"}]]}],"\n"]}],"\n",["$","h3","h3-28",{"children":"vPortPendSVHandler"}],"\n",["$","pre","pre-2",{"children":["$","code","code-0",{"className":"language-c","children":"$4"}]}],"\n",["$","h4","h4-17",{"children":"The Application Code:"}],"\n",["$","p","p-24",{"children":["$","code","code-0",{"children":"..\\..\\...\\Application\\User"}]}],"\n",["$","ul","ul-48",{"children":["\n",["$","li","li-0",{"children":["$","code","code-0",{"children":"Main.c"}]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"Gpio.c"}]}],"\n",["$","li","li-2",{"children":["$","em","em-0",{"children":"All peripherals that are needed…"}]}],"\n"]}],"\n",["$","h4","h4-18",{"children":"FreeRTOS (Kernel)"}],"\n",["$","p","p-25",{"children":["$","code","code-0",{"children":"..\\..\\..\\Middlewares\\Third_Party\\FreeRTOS\\Source"}]}],"\n",["$","ul","ul-49",{"children":["\n",["$","li","li-0",{"children":["$","code","code-0",{"children":"Croutine.c"}]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"Event_groups.c"}]}],"\n",["$","li","li-2",{"children":["$","code","code-0",{"children":"List.c"}]}],"\n",["$","li","li-3",{"children":["$","code","code-0",{"children":"Queue.c"}]}],"\n",["$","li","li-4",{"children":["$","code","code-0",{"children":"Tasks.c"}]}],"\n",["$","li","li-5",{"children":["$","code","code-0",{"children":"Timers.c"}]}],"\n"]}],"\n",["$","p","p-26",{"children":["$","code","code-0",{"children":"..\\..\\..\\Middlewares\\Third_Party\\FreeRTOS\\Source\\Include"}]}],"\n",["$","ul","ul-50",{"children":["\n",["$","li","li-0",{"children":["$","code","code-0",{"children":"croutine.h"}]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"event_groups.h"}]}],"\n",["$","li","li-2",{"children":["$","code","code-0",{"children":"FreeRTOS.h"}]}],"\n",["$","li","li-3",{"children":["$","code","code-0",{"children":"FreeRTOSConfig_template.h"}]}],"\n",["$","li","li-4",{"children":["$","code","code-0",{"children":"list.h"}]}],"\n",["$","li","li-5",{"children":["$","code","code-0",{"children":"mpu_wrappers.h"}]}],"\n",["$","li","li-6",{"children":["$","code","code-0",{"children":"portable.h"}]}],"\n",["$","li","li-7",{"children":["$","code","code-0",{"children":"projdefs.h"}]}],"\n",["$","li","li-8",{"children":["$","code","code-0",{"children":"queue.h"}]}],"\n",["$","li","li-9",{"children":["$","code","code-0",{"children":"semphr.h"}]}],"\n",["$","li","li-10",{"children":["$","code","code-0",{"children":"stack_macros.h"}]}],"\n",["$","li","li-11",{"children":["$","code","code-0",{"children":"task.h"}]}],"\n",["$","li","li-12",{"children":["$","code","code-0",{"children":"timers.h"}]}],"\n"]}],"\n",["$","h4","h4-19",{"children":"FreeRTOS Port"}],"\n",["$","p","p-27",{"children":["$","code","code-0",{"children":"..\\..\\..\\Middlewares\\Third_Party\\FreeRTOS\\Source\\CMSIS_RTOS"}]}],"\n",["$","ul","ul-51",{"children":["\n",["$","li","li-0",{"children":["$","code","code-0",{"children":"cmsis_os.c"}]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"cmsis_os.h"}]}],"\n"]}],"\n",["$","p","p-28",{"children":["$","code","code-0",{"children":"..\\..\\..\\Middlewares\\Third_Party\\FreeRTOS\\Source\\portable\\MemMang"}]}],"\n",["$","ul","ul-52",{"children":["\n",["$","li","li-0",{"children":[["$","code","code-0",{"children":"heap_1.c"}]," to ",["$","code","code-1",{"children":"heap_5.c"}]]}],"\n"]}],"\n",["$","p","p-29",{"children":["$","code","code-0",{"children":"..\\..\\..\\Middlewares\\Third_Party\\FreeRTOS\\Source\\portable\\RVDS\\ARM_CM3"}]}],"\n",["$","ul","ul-53",{"children":["\n",["$","li","li-0",{"children":[["$","code","code-0",{"children":"port.c"}]," ",["$","em","em-0",{"children":"(with assembly code)"}]]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"portmacro.h"}]}],"\n"]}],"\n",["$","p","p-30",{"children":["Kernel configuration",["$","br","br-0",{}],"\nInitializing the kernel",["$","br","br-1",{}],"\nApplication considerations"]}],"\n",["$","p","p-31",{"children":"The FreeRTOSConfig.h file present in the freeRTOS directory allow to configure FreeRTOS"}],"\n",["$","ul","ul-54",{"children":["\n",["$","li","li-0",{"children":"It selects the needed functionalities"}],"\n",["$","li","li-1",{"children":"It fixes the number of tasks in the application"}],"\n",["$","li","li-2",{"children":["It fixes the number of semaphores, queues..., the application will use",["$","br","br-0",{}],"\nThe kernel memory size of FreeRTOS will change regarding those parameters"]}],"\n",["$","li","li-3",{"children":"The will affect the code size and the data size."}],"\n"]}],"\n",["$","h4","h4-20",{"children":"Init and Config"}],"\n",["$","h5","h5-0",{"children":"Main config"}],"\n",["$","p","p-32",{"children":"configMINIMAL_STACK_SIZE"}],"\n",["$","ul","ul-55",{"children":["\n",["$","li","li-0",{"children":["Minimal Stack size reserved for each task",["$","br","br-0",{}],"\nconfigLIBRARY_LOWEST_INTERRUPT_PRIORITY"]}],"\n",["$","li","li-1",{"children":["The lowerst interrupt priority that can be used in a call to a \"set priority\"",["$","br","br-0",{}],"\nconfigLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY"]}],"\n",["$","li","li-2",{"children":"The highest interrupt priority that can be used by any interrupt service routnine that makes dcalls to interrupt safe FreeRTOS API functions."}],"\n"]}],"\n",["$","h5","h5-1",{"children":"Main functions"}],"\n",["$","p","p-33",{"children":"MX_FREERTOS_Init()"}],"\n",["$","ul","ul-56",{"children":["\n",["$","li","li-0",{"children":["Parameter freeRTOS",["$","br","br-0",{}],"\nosKernelStart()"]}],"\n",["$","li","li-1",{"children":"run the OS"}],"\n"]}],"\n",["$","pre","pre-3",{"children":["$","code","code-0",{"children":"void main(void)\n{\n    /* User initialization */\n    MX_FREERTOS_Init();       // Kernel Initialization\n    \n    //- Initializes FreeRTOS’s Data Structures \n    //- Creation of the applications tasks \n    //- Create the ‘statistics task\n    \n    /* Install interrupt vectors */\n    /* Create at least 1 task (Start Task) */\n    /* Additional User code */\n    osKernelStart();          // Start multitasking\n\n\t//- Creates the idle task ( xTaskCreate) \n\t//- sets up a tick interrupt and timers for the correct tick frequency. \n\t//- Determines the Highest Priority Task Created \n\t//- Calls prvStartFirstTask () (asm code)\n\n    while (1) // Standard main loop (never accessed)\n    {\n    }\n}\n\n"}]}],"\n",["$","h4","h4-21",{"children":"Build an application with FreeRTOS"}],"\n",["$","p","p-34",{"children":["$","img","img-0",{"src":"Build%20an%20application%20with%20FreeRTOS.png","alt":"Build an application with FreeRTOS"}]}],"\n",["$","h3","h3-29",{"children":"FreeRTOS Overview"}],"\n",["$","ul","ul-57",{"children":["\n",["$","li","li-0",{"children":"Task states & Resources"}],"\n",["$","li","li-1",{"children":"Task management"}],"\n",["$","li","li-2",{"children":"Interrupts management"}],"\n",["$","li","li-3",{"children":"Communications"}],"\n",["$","li","li-4",{"children":"Memory management"}],"\n",["$","li","li-5",{"children":"Time management"}],"\n"]}],"\n",["$","h4","h4-22",{"children":"Tasks states"}],"\n",["$","p","p-35",{"children":"Running"}],"\n",["$","ul","ul-58",{"children":["\n",["$","li","li-0",{"children":"task is actually executing."}],"\n",["$","li","li-1",{"children":["It is currently utilizing the processor.",["$","br","br-0",{}],"\nReady"]}],"\n",["$","li","li-2",{"children":"tasks is able to execute (not in the Blocked or Suspended state)"}],"\n",["$","li","li-3",{"children":["not currently executing.",["$","br","br-0",{}],"\nBlocked"]}],"\n",["$","li","li-4",{"children":"Task is waiting for either a temporal or external event."}],"\n",["$","li","li-5",{"children":["Do not use the CPU and cannot enter the in Running state.",["$","br","br-0",{}],"\nSuspended"]}],"\n",["$","li","li-6",{"children":"cannot be selected to enter the Running state."}],"\n",["$","li","li-7",{"children":"do not have a time out."}],"\n",["$","li","li-8",{"children":"Go into suspended state"}],"\n",["$","li","li-9",{"children":"vTaskSuspend() function."}],"\n",["$","li","li-10",{"children":"Exit from suspended state"}],"\n",["$","li","li-11",{"children":"xTaskResume() function."}],"\n"]}],"\n",["$","p","p-36",{"children":["Blocked examples : Task calls vTaskDelay() it will block until the delay period has expired Tasks is waiting for queue, semaphore, event group, notification or semaphore event. Tasks in the Blocked state may have a 'timeout' period to be automatically unblocked",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Example%20tasks%20management.png","alt":"Example tasks management"}]]}],"\n",["$","h4","h4-23",{"children":"Multiple Tasks"}],"\n",["$","p","p-37",{"children":"each Task Control Block (TCB) contains"}],"\n",["$","ul","ul-59",{"children":["\n",["$","li","li-0",{"children":["An identifier\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"character string"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Memory address\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"first instruction of the task"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":"Priority"}],"\n",["$","li","li-3",{"children":["Current task state\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"running, ready, block, or suspended."}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["Pointer to the stack\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["where context of the task is stored",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Mutiple%20Tasks.png","alt":"Mutiple Tasks"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-24",{"children":"Stack grows"}],"\n",["$","p","p-38",{"children":"From top to bottom"}],"\n",["$","ul","ul-60",{"children":["\n",["$","li","li-0",{"children":["portSTACK_GROWTH = -1 for Cortex M processors",["$","br","br-0",{}],"\nbottom to top"]}],"\n"]}],"\n",["$","h4","h4-25",{"children":"Two stacks"}],"\n",["$","ul","ul-61",{"children":["\n",["$","li","li-0",{"children":["MSP (Main Stack Pointer)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"used during statrup, mian() and interrupts"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["PSP (Process Stack Pointer)\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Is used by the process/tasks"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-26",{"children":"Tasks"}],"\n",["$","p","p-39",{"children":"Creation/deletion of tasks"}],"\n",["$","ul","ul-62",{"children":["\n",["$","li","li-0",{"children":["xTaskCreate, vTaskDelete",["$","br","br-0",{}],"\nTasks control:"]}],"\n",["$","li","li-1",{"children":"vTaskDelay, uxTaskPriorityGet, vTaskPrioritySet"}],"\n",["$","li","li-2",{"children":"vTaskSuspend, vTaskResume"}],"\n"]}],"\n",["$","h4","h4-27",{"children":"Tasks may not return a value"}],"\n",["$","ul","ul-63",{"children":["\n",["$","li","li-0",{"children":"Type is always void"}],"\n"]}],"\n",["$","h4","h4-28",{"children":"Tasks must be"}],"\n",["$","ul","ul-64",{"children":["\n",["$","li","li-0",{"children":"endless loop"}],"\n",["$","li","li-1",{"children":"can be detected"}],"\n"]}],"\n",["$","pre","pre-4",{"children":["$","code","code-0",{"className":"language-example","children":"portTASK_FUNCTION( vATaskFunction, pvParameters ) {\n\tfor( ;; ) \n\t\t{ -- Task application code here. -- } \n}\n"}]}],"\n",["$","ul","ul-65",{"children":["\n",["$","li","li-0",{"children":"Unlimited number of tasks (RAM limitation only)"}],"\n",["$","li","li-1",{"children":"Priority is a number between 0 and configMAX_PRIORITIES"}],"\n",["$","li","li-2",{"children":"lowest priority is priority 0"}],"\n",["$","li","li-3",{"children":"lowest levels the idle task priority !"}],"\n",["$","li","li-4",{"children":"For configMAX_PRIORITIES see FreeRTOS.H"}],"\n",["$","li","li-5",{"children":["There is always one task present: the idle task\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Created when the scheduler is started"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","pre","pre-5",{"children":["$","code","code-0",{"className":"language-c","children":"portBASE_TYPE xTaskCreate(\n    pdTASK_CODE         pvTaskCode,       // Pointer to the task function\n    const portCHAR * const pcName,        // Name of the task (for debugging)\n    unsigned portSHORT   usStackDepth,    // Stack size (in words, not bytes)\n    void *               pvParameters,    // Pointer to parameters passed to the task\n    unsigned portBASE_TYPE uxPriority,    // Task priority (0 to MAX_PRIORITIES - 1)\n    xTaskHandle *        pvCreatedTask    // Pointer to return task handle (can be NULL)\n);\n"}]}],"\n",["$","h4","h4-29",{"children":"Function prototype"}],"\n",["$","pre","pre-6",{"children":["$","code","code-0",{"className":"language-example","children":"// Prototype for task creation\nBaseType_t xTaskCreate(\n    TaskFunction_t pvTaskCode,       // Pointer to the task entry function\n    const char * const pcName,       // Descriptive name for the task\n    unsigned short usStackDepth,     // Stack size in words (not bytes)\n    void *pvParameters,              // Parameter passed into the task\n    UBaseType_t uxPriority,          // Task priority\n    TaskHandle_t *pxCreatedTask      // Handle returned to reference the task (optional)\n);\n"}]}],"\n",["$","h4","h4-30",{"children":"Parameters"}],"\n",["$","ul","ul-66",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"pvTaskCode"}]}],": Pointer to the task entry function."]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"pcName"}]}],": Descriptive name for the task (mainly for debugging)."]}],"\n",["$","li","li-2",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"usStackDepth"}]}],": Stack size in ",["$","strong","strong-1",{"children":"words"}],", not bytes."]}],"\n",["$","li","li-3",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"pvParameters"}]}],": Value passed into the task as its parameter."]}],"\n",["$","li","li-4",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"uxPriority"}]}],": Priority of the task (e.g., ",["$","code","code-0",{"children":"tskIDLE_PRIORITY"}],")."]}],"\n",["$","li","li-5",{"children":[["$","strong","strong-0",{"children":["$","code","code-0",{"children":"pxCreatedTask"}]}],": (Optional) Pointer to a handle to manage the created task. Can be ",["$","code","code-0",{"children":"NULL"}],"."]}],"\n"]}],"\n",["$","h4","h4-31",{"children":"Return Value"}],"\n",["$","ul","ul-67",{"children":["\n",["$","li","li-0",{"children":[["$","code","code-0",{"children":"pdPASS"}],": Task was successfully created."]}],"\n",["$","li","li-1",{"children":[["$","code","code-0",{"children":"errCOULD_NOT_ALLOCATE_REQUIRED_MEMORY"}]," (or ",["$","code","code-1",{"children":"pdFAIL"}],"): Task creation failed (e.g., insufficient heap memory)."]}],"\n"]}],"\n",["$","pre","pre-7",{"children":["$","code","code-0",{"children":"// Example task implementation\nvoid vTaskCode(void *pvParameters)\n{\n    // Assert that the passed parameter is 1\n    configASSERT(((uint32_t) pvParameters) == 1);\n\n    for (;;)\n    {\n        // Task code goes here\n    }\n}\n\n// Function to create and manage the task\nvoid vOtherFunction(void)\n{\n    BaseType_t xReturned;\n    TaskHandle_t xHandle = NULL;\n\n    // Create the task and store its handle\n    xReturned = xTaskCreate(\n        vTaskCode,         // Task function\n        \"NAME\",            // Task name\n        STACK_SIZE,        // Stack size in words\n        (void *)1,         // Parameter passed to task\n        tskIDLE_PRIORITY,  // Task priority\n        &xHandle           // Pointer to store task handle\n    );\n\n    if (xReturned == pdPASS)\n    {\n        // Task successfully created, now delete it\n        vTaskDelete(xHandle);\n    }\n}\n\n"}]}],"\n",["$","h4","h4-32",{"children":"Tasks deletion"}],"\n",["$","p","p-40",{"children":"void vTaskDelete(TaskHandle_t xTask);"}],"\n",["$","h5","h5-2",{"children":"Parameter"}],"\n",["$","ul","ul-68",{"children":["\n",["$","li","li-0",{"children":"xTask : The handle of the task to be deleted"}],"\n",["$","li","li-1",{"children":["NULL for self delete Task",["$","br","br-0",{}],"\nFreeing resources before deletion",["$","br","br-1",{}],"\nThe task being deleted will be removed from all ready, blocked, suspended and event lists.",["$","br","br-2",{}],"\nThe idle task is freeing the RTOS kernel allocated memory from tasks that have been deleted."]}],"\n"]}],"\n",["$","pre","pre-8",{"children":["$","code","code-0",{"className":"language-c","children":"void vOtherFunction( void ) { \n\tTaskHandle_t xHandle = NULL; // Create the task, storing the handle. \n\txTaskCreate( vTaskCode, \"NAME\", STACK_SIZE, NULL, tskIDLE_PRIORITY, &xHandle ); \n\t// Use the handle to delete the task. \n\tif( xHandle != NULL ) { \n\tvTaskDelete( xHandle ); \n\t} \n}\n"}]}],"\n",["$","pre","pre-9",{"children":["$","code","code-0",{"className":"language-c","children":"/* Task to be created */\nvoid vTaskCode(void *pvParameters)\n{\n    for (;;)\n    {\n        /* Task code goes here */\n    }\n}\n\n/* Function that creates a task */\nvoid vOtherFunction(void)\n{\n    static unsigned char ucParameterToPass;\n    xTaskHandle xHandle;\n\n    xTaskCreate(\n        vTaskCode,              // Task function\n        \"NAME\",                 // Task name\n        STACK_SIZE,             // Stack size (in words)\n        &ucParameterToPass,     // Task parameter\n        tskIDLE_PRIORITY,       // Task priority\n        &xHandle                // Handle to created task\n    );\n\n    /* Use the handle to delete the task */\n    vTaskDelete(xHandle);\n}\n\n"}]}],"\n",["$","h4","h4-33",{"children":"Scheduling tasks : priorities"}],"\n",["$","p","p-41",{"children":"The scheduler determine which task to run"}],"\n",["$","ul","ul-69",{"children":["\n",["$","li","li-0",{"children":["Depending on the priorities\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"In preemptive mode by default"}],"\n",["$","li","li-1",{"children":"May be configured for collaborative operation"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Number of priorities : tskMAX_PRIORITIES in FreeRTOSConfig.h",["$","br","br-0",{}],"\nStatic priorities: Do not change during execution of task"]}],"\n",["$","li","li-2",{"children":["FreeRTOS implemetation\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"low priority numbers denot low priority taks"}],"\n",["$","li","li-1",{"children":"the idle task has priority zero (tskIDLE_PRIORITY)"}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["Code can change the priority:\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["vTaskPrioritySet",["$","br","br-0",{}],"\nDynamic priorities: to remedy priority inversion"]}],"\n",["$","li","li-1",{"children":["Not supported by FreeRTOS\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"BUt manage priority inheritance (Mutex)"}],"\n",["$","li","li-1",{"children":"minimize priority inversion effects in some situations"}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h5","h5-3",{"children":"Scheduler"}],"\n",["$","p","p-42",{"children":"Starvation"}],"\n",["$","ul","ul-70",{"children":["\n",["$","li","li-0",{"children":"if a maximal priority task is continously running, the other tasks wont execute"}],"\n",["$","li","li-1",{"children":["there is no automatic mechanism to avoid this",["$","br","br-0",{}],"\nSolutions"]}],"\n",["$","li","li-2",{"children":"Verify that there is no such situation"}],"\n"]}],"\n",["$","h5","h5-4",{"children":"Idle Task"}],"\n",["$","p","p-43",{"children":"The microcontroller must always do something"}],"\n",["$","ul","ul-71",{"children":["\n",["$","li","li-0",{"children":"An idle task is automatically created at the scheduler start"}],"\n",["$","li","li-1",{"children":["The idle task is responsible for:\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Compute statistics"}],"\n",["$","li","li-1",{"children":"Recover memory from deleted tasks"}],"\n",["$","li","li-2",{"children":"calculate the processor utilization"}],"\n",["$","li","li-3",{"children":"put the processor in low power mode"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h5","h5-5",{"children":"Lists"}],"\n",["$","p","p-44",{"children":["Lists = internal system tools",["$","br","br-0",{}],"\nUsed in FreeRTOS"]}],"\n",["$","ul","ul-72",{"children":["\n",["$","li","li-0",{"children":"For tasks scheduling"}],"\n",["$","li","li-1",{"children":"For files implementation"}],"\n",["$","li","li-2",{"children":["Many structures to descibe the lists",["$","br","br-0",{}],"\nxLIST is the header of the scheduler created and used lists :"]}],"\n"]}],"\n",["$","pre","pre-10",{"children":["$","code","code-0",{"className":"language-c","children":"typedef struct xLIST\n{\n    volatile unsigned portBASE_TYPE uxNumberOfItems;\n    /* Number of items in the list. */\n\n    volatile xListItem *pxIndex;\n    /* Pointer used to iterate through the list. */\n\n    volatile xMiniListItem xListEnd;\n    /* Sentinel item marking the end of the list. */\n} xList;\n"}]}],"\n",["$","p","p-45",{"children":"xLIST_ITEM: are the double chained lists of elements :"}],"\n",["$","pre","pre-11",{"children":["$","code","code-0",{"className":"language-c","children":"typedef struct xLIST_ITEM\n{\n    portTickType xItemValue;\n    /* A value assigned to this list item. */\n\n    volatile struct xLIST_ITEM *pxNext;\n    /* Pointer to the next list item. */\n\n    volatile struct xLIST_ITEM *pxPrevious;\n    /* Pointer to the previous list item. */\n\n    void *pvOwner;\n    /* Pointer to the object that owns this list item. */\n\n    void *pvContainer;\n    /* Pointer to the list this item belongs to. */\n} xListItem;\n\n"}]}],"\n",["$","p","p-46",{"children":"xMINI_LIST_ITEM: smaller implementation of xLIST_ITEM."}],"\n",["$","ul","ul-73",{"children":["\n",["$","li","li-0",{"children":"Doesn't have pvOwner and pvContainer members"}],"\n",["$","li","li-1",{"children":["Represents an end of list element.",["$","br","br-0",{}],"\nLists synoptic :",["$","br","br-1",{}],"\n",["$","img","img-0",{"src":"Lists%20synoptic.png","alt":"Lists synoptic"}]]}],"\n"]}],"\n",["$","h4","h4-34",{"children":"Tasks communication"}],"\n",["$","p","p-47",{"children":"Semaphore why to use?"}],"\n",["$","ul","ul-74",{"children":["\n",["$","li","li-0",{"children":"Access to a shared resource"}],"\n",["$","li","li-1",{"children":"signal the occurrence of event"}],"\n",["$","li","li-2",{"children":["allow two tasks to synchronize",["$","br","br-0",{}],"\nType"]}],"\n",["$","li","li-3",{"children":"binary"}],"\n",["$","li","li-4",{"children":["counting",["$","br","br-0",{}],"\nMessage mailboxes",["$","br","br-1",{}],"\nmessage queues",["$","br","br-2",{}],"\nevents"]}],"\n"]}],"\n",["$","h5","h5-6",{"children":"Message Queues"}],"\n",["$","p","p-48",{"children":"xQueueCreate,xQueueCreateStatic"}],"\n",["$","ul","ul-75",{"children":["\n",["$","li","li-0",{"children":["Creates a message queue",["$","br","br-0",{}],"\nvQueueDelete"]}],"\n",["$","li","li-1",{"children":["Deletes the queue(queue memory also)",["$","br","br-0",{}],"\nxQueueReceive, xQueueSend"]}],"\n",["$","li","li-2",{"children":["Queues send and receive functions",["$","br","br-0",{}],"\nAdditional fucntions"]}],"\n",["$","li","li-3",{"children":"uxQueueMessagesWaiting : returns the number of message in the queue"}],"\n",["$","li","li-4",{"children":"uxQueueSpacesAvailable : returns the number of free spaces available in the queue."}],"\n",["$","li","li-5",{"children":"xQueueReset : resets a queue to its originial empty state"}],"\n"]}],"\n",["$","h5","h5-7",{"children":"Queues"}],"\n",["$","p","p-49",{"children":"Create a queue"}],"\n",["$","pre","pre-12",{"children":["$","code","code-0",{"className":"language-c","children":"xQueueHandle xQueueCreate( \nunsigned portBASE_TYPE uxQueueLength, \n/* Nombre d’éléments. */ \nunsigned portBASE_TYPE uxItemSize \n/* Taille d’un élément. */ );\n"}]}],"\n",["$","h6","h6-0",{"children":"Reading"}],"\n",["$","p","p-50",{"children":["IF several task want read in a queue the one of the highest priority choosen",["$","br","br-0",{}],"\nIn case of same priorityu the firstwhich asked fir the queue will get the info.",["$","br","br-1",{}],"\nA read element will be removed from the queue"]}],"\n",["$","ul","ul-76",{"children":["\n",["$","li","li-0",{"children":"xQueuePeek"}],"\n"]}],"\n",["$","pre","pre-13",{"children":["$","code","code-0",{"className":"language-c","children":"portBASE_TYPE xQueueReceive( \nxQueueHandle xQueue, \n/* Identifiant de la file. */ \nconst void * pvBuffer, /* Pointeur vers un buffer où la donnée sera copiée. */ portTickType xTicksToWait /* Valeur de timeout. */ );\n"}]}],"\n",["$","p","p-51",{"children":"Same considerations as for reading"}],"\n",["$","pre","pre-14",{"children":["$","code","code-0",{"className":"language-c","children":"/* FIFO Mode */ portBASE_TYPE xQueueSend( \nxQueueHandle xQueue, /* Identifiant de la file. */ \nconst void * pvItemToQueue, /* Pointeur vers l‘élément à copier */ \nportTickType xTicksToWait /* Valeur de timeout. */ ); \n\nportBASE_TYPE xQueueSendToBack(xQueueHandle xQueue, const void * pvItemToQueue, portTickType xTicksToWait); \n/* LIFO Mode */ portBASE_TYPE xQueueSendToFront(xQueueHandle xQueue, const void * pvItemToQueue, portTickType xTicksToWait);\n"}]}],"\n",["$","p","p-52",{"children":"Message queue example :"}],"\n",["$","pre","pre-15",{"children":["$","code","code-0",{"className":"language-c","children":"struct AMessage\n{\n    char ucMessageID;\n    char ucData[20];\n};\nvoid vATask(void *pvParameters)\n{\n    QueueHandle_t xQueue1, xQueue2;\n    /* Create a queue capable of containing 10 unsigned long values. */\n    xQueue1 = xQueueCreate(10, sizeof(unsigned long));\n    if (xQueue1 == NULL)\n    {\n        /* Queue was not created and must not be used. */\n    }\n    /* Create a queue capable of containing 10 pointers to AMessage\n       structures. These are to be queued by pointers as they are\n       relatively large structures. */\n    xQueue2 = xQueueCreate(10, sizeof(struct AMessage *));\n    if (xQueue2 == NULL)\n    {\n        /* Queue was not created and must not be used. */\n    }\n    /* ... Rest of task code. */\n}\n"}]}],"\n",["$","p","p-53",{"children":"Message queue 2 :"}],"\n",["$","pre","pre-16",{"children":["$","code","code-0",{"className":"language-c","children":"struct AMessage\n{\n    char ucMessageID;\n    char ucData[20];\n} xMessage;\nQueueHandle_t xQueue;\nvoid vATask(void *pvParameters) // Task to create a queue and post a value.\n{\n    struct AMessage *pxMessage;\n    pxMessage = &xMessage;\n    // Create a queue capable of containing 10 pointers to AMessage structures.\n    // These should be passed by pointer as they contain a lot of data.\n    xQueue = xQueueCreate(10, sizeof(struct AMessage *));\n    if (xQueue == 0)\n    {\n        // Failed to create the queue.\n    }\n    // Send a pointer to a struct AMessage object. Don't block if the queue is already full.\n    xQueueSend(xQueue, (void *)&pxMessage, (TickType_t)0);\n    // ... Rest of task code.\n}\n"}]}],"\n",["$","p","p-54",{"children":["Illustration queue",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Illustration%20queue.png","alt":"Illustration queue"}]]}],"\n",["$","p","p-55",{"children":["Queue reading example",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"example%20deux%20queue.png","alt":"example deux queue"}]]}],"\n",["$","h4","h4-35",{"children":"Semaphore and mutexes"}],"\n",["$","p","p-56",{"children":["Semaphores and mutexes are the main methods for FreeRTOS to synchromise tasks",["$","br","br-0",{}],"\n2 main type of semaphore binary and counters"]}],"\n",["$","h4","h4-36",{"children":"Binary"}],"\n",["$","p","p-57",{"children":["Easiest way to synchroize tasks",["$","br","br-0",{}],"\nsimilar to a one element queue",["$","br","br-1",{}],"\nMust be created before using it"]}],"\n",["$","p","p-58",{"children":"At creation the binary sempahore is available"}],"\n",["$","pre","pre-17",{"children":["$","code","code-0",{"className":"language-c","children":"xSemaphoreHandle xSemaphore; \nvoid vATask( void * pvParameters ) { \n// Semaphore cannot be used before a call to vSemaphoreCreateBinary (). \n// This is a macro so pass the variable in directly. \n\tvSemaphoreCreateBinary( xSemaphore ); if( xSemaphore != NULL ) { \n\t// The semaphore was created successfully. \n\t// The semaphore can now be used. \n\t} \n}\n"}]}],"\n",["$","h5","h5-8",{"children":"Semaphore operations"}],"\n",["$","p","p-59",{"children":"xSempahoreCreateBinary() or xSemaphoreCreateBinaryStatic :"}],"\n",["$","ul","ul-77",{"children":["\n",["$","li","li-0",{"children":["Create new semaphore",["$","br","br-0",{}],"\nvSemaphoreDelete():use with care !"]}],"\n",["$","li","li-1",{"children":"Deletes the semaphore\\"}],"\n",["$","li","li-2",{"children":["Do not delete a semaphore that has tasks blocked on it",["$","br","br-0",{}],"\nxSemaphoreTake(), xSemaphoreGive()"]}],"\n",["$","li","li-3",{"children":["Wait on or free a semaphore",["$","br","br-0",{}],"\nFrom ISR",["$","br","br-1",{}],"\nportBASE_TYPE xGiveSemaphoreFromISR(xSemaphoreHandle xSemaphore);"]}],"\n"]}],"\n",["$","p","p-60",{"children":["Taking a semaphore",["$","br","br-0",{}],"\nportBASE_TYPE xSemaphoreTake(xSemaphoreHandle xSemaphore, portTickType xTicksToWait);",["$","br","br-1",{}],"\nFreeing a semaphore",["$","br","br-2",{}],"\nportBASE_TYPE xSemaphoreGive(xSemaphoreHandle xSemaphore);",["$","br","br-3",{}],"\nGiving from ISR",["$","br","br-4",{}],"\nportBASE_TYPE xGiveSemaphoreFromISR(xSemaphoreHandle xSemaphore);"]}],"\n",["$","h5","h5-9",{"children":"Semaphore take example"}],"\n",["$","pre","pre-18",{"children":["$","code","code-0",{"className":"language-c","children":"if( xSemaphore != NULL ) { \n// See if we can obtain the semaphore. If the semaphore is not available \n// wait 10 ticks to see if it becomes free. \n\tif( xSemaphoreTake( xSemaphore, ( portTickType ) 10 ) == pdTRUE ) {\n\t// xSemaphore available} else {\n\t// time overflow, xSemaphore is not available\n\t}\n}\n"}]}],"\n",["$","h5","h5-10",{"children":"Semaphore give example"}],"\n",["$","pre","pre-19",{"children":["$","code","code-0",{"className":"language-c","children":"if( xSemaphoreGive( xSemaphore ) != pdTRUE ) { \n// error xSemaphore not released …. }\n"}]}],"\n",["$","h5","h5-11",{"children":"Waiting binary semaphores from ISR"}],"\n",["$","pre","pre-20",{"children":["$","code","code-0",{"className":"language-c","children":"#define LONG_TIME       0xffff\n#define TICKS_TO_WAIT   10\n\nSemaphoreHandle_t xSemaphore = NULL;\n\n/* Repetitive task that waits on a semaphore. */\nvoid vATask(void *pvParameters)\n{\n    // Create a binary semaphore before the ISR uses it.\n    xSemaphore = xSemaphoreCreateBinary();\n\n    if (xSemaphore == NULL)\n    {\n        // Failed to create semaphore, handle error.\n        for (;;); // Optional: loop forever.\n    }\n\n    for (;;)\n    {\n        // Block waiting for the semaphore to be given (e.g., by an ISR).\n        if (xSemaphoreTake(xSemaphore, LONG_TIME) == pdTRUE)\n        {\n            // Semaphore obtained – perform the task action here.\n            // For example:\n            // Toggle an LED, read a sensor, etc.\n            // ...\n\n            // After finishing the task, the loop restarts and waits again.\n        }\n    }\n}\n\n"}]}],"\n",["$","h6","h6-1",{"children":"Giving a semaphore from ISR"}],"\n",["$","pre","pre-21",{"children":["$","code","code-0",{"className":"language-c","children":"/* Timer ISR */\nvoid vTimerISR(void *pvParameters)\n{\n    static unsigned char ucLocalTickCount = 0;\n    BaseType_t xHigherPriorityTaskWoken = pdFALSE;\n\n    /* A timer tick has occurred. Do any necessary timer-related operations here. */\n    // ... Other timer-related code\n\n    /* Increment local tick count. */\n    ucLocalTickCount++;\n\n    /* Check if it's time to unblock the task (every TICKS_TO_WAIT ticks). */\n    if (ucLocalTickCount >= TICKS_TO_WAIT)\n    {\n        /* Unblock the task by giving the semaphore. */\n        xSemaphoreGiveFromISR(xSemaphore, &xHigherPriorityTaskWoken);\n\n        /* Reset tick count to start the cycle again. */\n        ucLocalTickCount = 0;\n    }\n\n    /* Perform a context switch if the unblocked task has a higher priority. */\n    portYIELD_FROM_ISR(xHigherPriorityTaskWoken);\n}\n"}]}],"\n",["$","h5","h5-12",{"children":"ISR toTask synchronisation using semaphore"}],"\n",["$","p","p-61",{"children":["$","img","img-0",{"src":"ISR%20toTask%20synchronisation%20using%20semaphore.png","alt":"ISR toTask synchronisation using semaphore"}]}],"\n",["$","h5","h5-13",{"children":"COunting semaphores"}],"\n",["$","ul","ul-78",{"children":["\n",["$","li","li-0",{"children":"Can be used several time before becoming unavailable"}],"\n",["$","li","li-1",{"children":"Creating a counting semaphore"}],"\n"]}],"\n",["$","pre","pre-22",{"children":["$","code","code-0",{"className":"language-c","children":"xSemaphoreHandle xSemaphoreCreateCounting( \nunsigned portBASE_TYPE uxMaxCount, \n/* Capacité du sémaphore compteur. */ \nunsigned portBASE_TYPE uxInitialCount \n/* Valeur du compteur après création. */ );\n"}]}],"\n",["$","h6","h6-2",{"children":"Static allocation"}],"\n",["$","ul","ul-79",{"children":["\n",["$","li","li-0",{"children":["Dynamic memory allocation\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"SemaphoreHandle_t xSemaphoreCreateBinary( void );"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["Statiuc memory allocation\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"SemaphoreHandle_t xSemaphoreCreateBinaryStatic( StaticSemaphore_t"}],"\n"]}],"\n",["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"pxSemaphoreBuffer );"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","pre","pre-23",{"children":["$","code","code-0",{"className":"language-c","children":"SemaphoreHandle_t xSemaphore = NULL;            // Handle for the semaphore\nStaticSemaphore_t xSemaphoreBuffer;             // Static memory buffer for the semaphore\n\nvoid vATask(void *pvParameters)\n{\n    // Create the binary semaphore using static allocation.\n    // The semaphore's internal structure is stored in xSemaphoreBuffer.\n    xSemaphore = xSemaphoreCreateBinaryStatic(&xSemaphoreBuffer);\n\n    // Ensure the semaphore was created successfully.\n    configASSERT(xSemaphore != NULL);\n\n    // ... Rest of the task code\n}\n"}]}],"\n",["$","ul","ul-80",{"children":["\n",["$","li","li-0",{"children":["Semaphore given by interrupts\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"xSemaphoreTakeFromISR ( SemaphoreHandle_t xSemaphore, signed BaseType_t"}],"\n"]}],"\n",["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"pxHigherPriorityTaskWoken)"}],"\n"]}],"\n",["$","ul","ul-2",{"children":["\n",["$","li","li-0",{"children":"xSemaphoreGiveFromISR ( SemaphoreHandle_t xSemaphore, signed BaseType_t"}],"\n"]}],"\n",["$","ul","ul-3",{"children":["\n",["$","li","li-0",{"children":["pxHigherPriorityTaskWoken)",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Semaphore%20interrupts.png","alt":"Semaphore interrupts"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h4","h4-37",{"children":"Mutexes"}],"\n",["$","p","p-62",{"children":"Used to share common ressources"}],"\n",["$","ul","ul-81",{"children":["\n",["$","li","li-0",{"children":"Avoid mutual exclusion"}],"\n",["$","li","li-1",{"children":"the task whioch takes the mutex must release it"}],"\n",["$","li","li-2",{"children":["Mutex is a semaphore with priority inheritance",["$","br","br-0",{}],"\nMutex creation"]}],"\n"]}],"\n",["$","pre","pre-24",{"children":["$","code","code-0",{"className":"language-c","children":"void vATask( void * pvParameters ) { \n/* Create a mutex type semaphore. */ \nxSemaphore = xSemaphoreCreateMutex(); \n\tif( xSemaphore != NULL ) { \n\t/* The semaphore was created successfully and can be used. */ \n\t} \n}\n"}]}],"\n",["$","p","p-63",{"children":"A task needs a ressource and try to take the mutex"}],"\n",["$","ul","ul-82",{"children":["\n",["$","li","li-0",{"children":["It get it",["$","br","br-0",{}],"\nA second task needs the ressource"]}],"\n",["$","li","li-1",{"children":["Try to get it, ut fail",["$","br","br-0",{}],"\nUsed as a semaphore",["$","br","br-1",{}],"\n",["$","img","img-0",{"src":"Mutexes.png","alt":"Mutexes"}],["$","br","br-2",{}],"\nMutex Overview",["$","br","br-3",{}],"\n",["$","img","img-1",{"src":"Mutex%20Overview.png","alt":"Mutex Overview"}]]}],"\n"]}],"\n",["$","pre","pre-25",{"children":["$","code","code-0",{"className":"language-c","children":"SemaphoreHandle_t xSemaphore = NULL;\n\n/* A task that creates a mutex semaphore. */\nvoid vATask(void *pvParameters)\n{\n    // Create a mutex to protect access to a shared resource.\n    xSemaphore = xSemaphoreCreateMutex();\n}\n\n/* A task that uses the mutex semaphore. */\nvoid vAnotherTask(void *pvParameters)\n{\n    // ... Perform other operations first\n\n    if (xSemaphore != NULL)\n    {\n        // Try to take the mutex. Wait for up to 10 ticks.\n        if (xSemaphoreTake(xSemaphore, (TickType_t)10) == pdTRUE)\n        {\n            // Successfully obtained the mutex.\n            // Safe access to shared resource begins.\n            // ...\n\n            // Done with the shared resource, release the mutex.\n            xSemaphoreGive(xSemaphore);\n        }\n        else\n        {\n            // Failed to obtain the mutex within 10 ticks.\n            // Cannot safely access the shared resource.\n        }\n    }\n}\n\n"}]}],"\n",["$","p","p-64",{"children":["Priority inversion",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Priority%20inversion.png","alt":"Priority inversion"}],["$","br","br-1",{}],"\nThis dangerous sequence of events is illustrated in before"]}],"\n",["$","ul","ul-83",{"children":["\n",["$","li","li-0",{"children":"Low priority LP task and high priority HP task share a resource"}],"\n",["$","li","li-1",{"children":"After LP task takes the resources, HP Task becomes ready to run"}],"\n",["$","li","li-2",{"children":"HP task must wait for LP aTask to finish with the resource so it pends"}],"\n",["$","li","li-3",{"children":"Before LP Task finishes with the resource, MP Task becomes ready to run preempting LP Task"}],"\n",["$","li","li-4",{"children":["While MP Task( and perhaps additional intermediate priority task) runs, HP task, the highest-priority task in the system, remains in a pending state",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Task%20priority%20inversion.png","alt":"Task priority inversion"}]]}],"\n"]}],"\n",["$","h6","h6-3",{"children":"If the second task has a higher priority"}],"\n",["$","ul","ul-84",{"children":["\n",["$","li","li-0",{"children":"It waits"}],"\n",["$","li","li-1",{"children":"The priority of the running task is raised to the second task priority"}],"\n"]}],"\n",["$","h6","h6-4",{"children":"The waiting task keeps is initial priority"}],"\n",["$","h5","h5-14",{"children":"Interrupts"}],"\n",["$","p","p-65",{"children":["Interrups rely on material",["$","br","br-0",{}],"\nFreeRTOS provides methods to use interrupts",["$","br","br-1",{}],"\nISR functions are directly handled by the processor"]}],"\n",["$","ul","ul-85",{"children":["\n",["$","li","li-0",{"children":["Specific actions must be taken for FreeRTOS to reconize them",["$","br","br-0",{}],"\nInterrupt processing"]}],"\n",["$","li","li-1",{"children":"Interrupt Service Routine"}],"\n",["$","li","li-2",{"children":"Interrupt Latency, Response and recovery"}],"\n",["$","li","li-3",{"children":["Interrupts to taks dialog",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Interrupt%20latency%20NON%20preemptive.png","alt":"Interrupt latency NON preemptive"}]]}],"\n"]}],"\n",["$","p","p-66",{"children":["$","img","img-0",{"src":"Interrupt%20latency%20preemptive.png","alt":"Interrupt latency preemptive"}]}],"\n",["$","h5","h5-15",{"children":"FreeRTOS interrupts sharing"}],"\n",["$","p","p-67",{"children":[["$","img","img-0",{"src":"Interrupts%20sharing.png","alt":"Interrupts sharing"}],["$","br","br-0",{}],"\nISR Processing must be as short as possible"]}],"\n",["$","ul","ul-86",{"children":["\n",["$","li","li-0",{"children":["Long interrupts are partly deferred to a task",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"ISR%20deferred%20interrupts.png","alt":"ISR deferred interrupts"}]]}],"\n"]}],"\n",["$","h4","h4-38",{"children":"Task resume"}],"\n",["$","p","p-68",{"children":"Interrupts may dialog with tasks"}],"\n",["$","ul","ul-87",{"children":["\n",["$","li","li-0",{"children":["Use of dedicated API functions\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["Ends with \"FromISR«",["$","br","br-0",{}],"\nResume task from isr"]}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"xTaskResumeFromISR"}],"\n"]}],"\n",["$","pre","pre-26",{"children":["$","code","code-0",{"className":"language-c","children":"$5"}]}],"\n",["$","h4","h4-39",{"children":"Critical Sections"}],"\n",["$","p","p-69",{"children":"Critical section: the task must not be preempted."}],"\n",["$","ul","ul-88",{"children":["\n",["$","li","li-0",{"children":"All Interrupts are disabled"}],"\n",["$","li","li-1",{"children":"the tick timer too!"}],"\n"]}],"\n",["$","p","p-70",{"children":"Use a FreeRTOS primitive or a macro like cli()/sti() under Linux!"}],"\n",["$","ul","ul-89",{"children":["\n",["$","li","li-0",{"children":"void taskENTER_CRITICAL( void );"}],"\n",["$","li","li-1",{"children":"void taskEXIT_CRITICAL( void );"}],"\n"]}],"\n",["$","pre","pre-27",{"children":["$","code","code-0",{"className":"language-c","children":"void vDemoFunction(void) {\n    taskENTER_CRITICAL();\n    /* Protected action here */\n    taskEXIT_CRITICAL();\n}\n\nvoid vTask1(void *pvParameters) {\n    for (;;) {\n        /* Functionality before critical section */\n        taskENTER_CRITICAL();\n        vDemoFunction();\n        taskEXIT_CRITICAL();\n    }\n}\n"}]}],"\n",["$","h5","h5-16",{"children":"scheduler suspend"}],"\n",["$","p","p-71",{"children":"Suspends the scheduler"}],"\n",["$","ul","ul-90",{"children":["\n",["$","li","li-0",{"children":"without disabling interrupts."}],"\n",["$","li","li-1",{"children":"void vTaskSuspendAll( void );"}],"\n",["$","li","li-2",{"children":"Disables Context switches"}],"\n",["$","li","li-3",{"children":["RTOS ticks will be held pending",["$","br","br-0",{}],"\nRestart with"]}],"\n",["$","li","li-4",{"children":"xTaskResumeAll()."}],"\n"]}],"\n",["$","pre","pre-28",{"children":["$","code","code-0",{"className":"language-c","children":"void vTask1(void *pvParameters) {\n    for (;;) {\n        // Task code goes here.\n        // ...\n        // At some point the task wants to perform a long operation during which it does not want to get swapped out.\n        // It cannot use taskENTER_CRITICAL()/taskEXIT_CRITICAL() as the length of the operation may cause interrupts to be missed - including the ticks.\n        // Prevent the RTOS kernel swapping out the task.\n        vTaskSuspendAll();\n        // Perform the operation here. There is no need to use critical sections as we have all the microcontroller processing time.\n        // During this time interrupts will still operate and the RTOS kernel tick count will be maintained.\n        // ...\n        // The operation is complete. Restart the RTOS kernel.\n        xTaskResumeAll();\n    }\n}\n\n"}]}],"\n",["$","h4","h4-40",{"children":"Evetn groups"}],"\n",["$","p","p-72",{"children":"Event groupsa llow events to be communicated to tasks"}],"\n",["$","ul","ul-91",{"children":["\n",["$","li","li-0",{"children":"Allow a task toi wait in the blocked state for a combination of one of more events to occur"}],"\n",["$","li","li-1",{"children":"Unblock all the tasks that were waiting for the same event, or combination eof events, when the event occurs"}],"\n",["$","li","li-2",{"children":"USeful for synchronizing multiple tasks"}],"\n",["$","li","li-3",{"children":["24 flag availale per event group",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Event%20group.png","alt":"Event group"}]]}],"\n"]}],"\n",["$","h4","h4-41",{"children":"event group or flags"}],"\n",["$","p","p-73",{"children":"xEventGroupCreate():"}],"\n",["$","ul","ul-92",{"children":["\n",["$","li","li-0",{"children":"Creates an Event Group Flag (a bit from a memory location)"}],"\n",["$","li","li-1",{"children":["number of bits (or flags) implemented within an event group\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"8 bits if configUSE_16_BIT_TICKS =1"}],"\n",["$","li","li-1",{"children":["24 bits if configUSE_16_BIT_TICKS =0",["$","br","br-0",{}],"\nvEventGroupDelete()"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["Deletes the group flag",["$","br","br-0",{}],"\nxEventGroupSetABits(), xEventGroupWaitBits():"]}],"\n",["$","li","li-3",{"children":["a task posts for a Event Flag or waits an Event",["$","br","br-0",{}],"\nxEventGroupClearBits"]}],"\n",["$","li","li-4",{"children":["Clears specific bits",["$","br","br-0",{}],"\nAdditional functions:"]}],"\n",["$","li","li-5",{"children":"xEventGroupGetBits() : get the current flag value"}],"\n"]}],"\n",["$","p","p-74",{"children":"Example 1 :"}],"\n",["$","pre","pre-29",{"children":["$","code","code-0",{"className":"language-c","children":"$6"}]}],"\n",["$","pre","pre-30",{"children":["$","code","code-0",{"className":"language-c","children":"$7"}]}],"\n",["$","pre","pre-31",{"children":["$","code","code-0",{"className":"language-c","children":"static void vEventBitSettingTask(void *pvParameters) {\n    const TickType_t xDelay200ms = pdMS_TO_TICKS(200UL);\n    for (;;) {\n        /* Delay before setting bit 0. */\n        vTaskDelay(xDelay200ms);\n        /* Notify and set event bit 0. */\n        vPrintString(\"Bit setting task -\\t about to set bit 0.\\r\\n\");\n        xEventGroupSetBits(xEventGroup, mainFIRST_TASK_BIT);\n\n        /* Delay before setting bit 1. */\n        vTaskDelay(xDelay200ms);\n        /* Notify and set event bit 1. */\n        vPrintString(\"Bit setting task -\\t about to set bit 1.\\r\\n\");\n        xEventGroupSetBits(xEventGroup, mainSECOND_TASK_BIT);\n    }\n}\n\n"}]}],"\n",["$","pre","pre-32",{"children":["$","code","code-0",{"className":"language-c","children":"$8"}]}],"\n",["$","pre","pre-33",{"children":["$","code","code-0",{"className":"language-c","children":"static uint32_t ulEventBitSettingISR(void)\n{\n    /* The string is static to ensure it exists when the daemon task prints it, since ISR stack won't exist then. */\n    static const char *pcString = \"Bit setting ISR -\\t about to set bit 2.\\r\\n\";\n    BaseType_t xHigherPriorityTaskWoken = pdFALSE;\n\n    /* Defer printing from ISR to RTOS daemon task by pending the function call. */\n    xTimerPendFunctionCallFromISR(vPrintStringFromDaemonTask, (void *)pcString, 0, &xHigherPriorityTaskWoken);\n\n    /* Set bit 2 in the event group from ISR. */\n    xEventGroupSetBitsFromISR(xEventGroup, mainISR_BIT, &xHigherPriorityTaskWoken);\n\n    /* If any operation caused a higher priority task to unblock, request context switch. */\n    portYIELD_FROM_ISR(xHigherPriorityTaskWoken);\n}\n\n"}]}],"\n",["$","h4","h4-42",{"children":"Memory Managament"}],"\n",["$","p","p-75",{"children":"The memory Management includes :"}],"\n",["$","ul","ul-93",{"children":["\n",["$","li","li-0",{"children":"Static allocation"}],"\n",["$","li","li-1",{"children":["Dynamic allocation\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"heap_1 :simplest, does not permit memory to be freed"}],"\n",["$","li","li-1",{"children":"heap_2 : permits memory to be freed, but not does coalescence adjacent free blocks."}],"\n",["$","li","li-2",{"children":"heap_3 : wraps the standard malloc() and free() for thread safety"}],"\n",["$","li","li-3",{"children":"heap_4 : coalescences adjacent free blocks to avoid fragmentation. Includes absolute address placement option"}],"\n",["$","li","li-4",{"children":["heap_5 : heap_4, with the ability to span the heap across multiple non-adjacent memory areas",["$","br","br-0",{}],"\nProblem with malloc() and free(): it can run out of memory",["$","br","br-1",{}],"\nEven if you calculate the memory, fragmentation can occur.",["$","br","br-2",{}],"\nUse well suited dynamic allocation scheme :"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["Heap_1 to heap_5",["$","br","br-0",{}],"\nOr use static memory attribution"]}],"\n",["$","li","li-3",{"children":"To have more control on allocated"}],"\n",["$","li","li-4",{"children":"When dynamic memory allocation is forbidden in some applications"}],"\n"]}],"\n",["$","h4","h4-43",{"children":"Time management"}],"\n",["$","p","p-76",{"children":"Clock tick: a clcok tick is a peridoci time source to keep track of time delays and time outs."}],"\n",["$","ul","ul-94",{"children":["\n",["$","li","li-0",{"children":["Tick intervals: 1~100ms",["$","br","br-0",{}],"\nThe faster the tick rate, the higher the overhead impose on the system",["$","br","br-1",{}],"\nWhen ever a clock tick occurs FreeRTOS increments a 32 bit counter",["$","br","br-2",{}],"\nThe counter starts at zero, and rolls over ot 4,294,967,295 * 2^32-2 ticks",["$","br","br-3",{}],"\nA tasks can be delayed and a delayed task can also be resumed"]}],"\n"]}],"\n",["$","p","p-77",{"children":"Five services :"}],"\n",["$","ul","ul-95",{"children":["\n",["$","li","li-0",{"children":"vTaskDelay(): delaying a task according a number of clock ticks"}],"\n",["$","li","li-1",{"children":["vTaskDelayUntil",["$","br","br-0",{}],"\nMaximum delay 256 hours (11 days)"]}],"\n",["$","li","li-2",{"children":"xTaskAbortDelay(): resuming a Delayed Task"}],"\n"]}],"\n",["$","h4","h4-44",{"children":"Software timers"}],"\n",["$","p","p-78",{"children":["implemented by and under the control of the kernel.",["$","br","br-0",{}],"\nThey do not require hardware support.",["$","br","br-1",{}],"\nDo not use processing time(except call back function)"]}],"\n",["$","p","p-79",{"children":"2 mode:"}],"\n",["$","ul","ul-96",{"children":["\n",["$","li","li-0",{"children":"One shot timer"}],"\n",["$","li","li-1",{"children":["auto reload timers",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Software%20timers.png","alt":"Software timers"}],["$","br","br-1",{}],"\nSoftware timers have 2 states :"]}],"\n",["$","li","li-2",{"children":"Dormant"}],"\n",["$","li","li-3",{"children":"Running"}],"\n",["$","li","li-4",{"children":["They execute in a daemon task context",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"State%20software%20timer.png","alt":"State software timer"}],["$","br","br-1",{}],"\nSoftware timer creation and deletion"]}],"\n",["$","li","li-5",{"children":"xTimerCreate, xTimerCreateStatic"}],"\n",["$","li","li-6",{"children":["xTimerDelete",["$","br","br-0",{}],"\nTimer informations"]}],"\n",["$","li","li-7",{"children":"xTimerIsTimerActive, pvTimweGetTimerID"}],"\n",["$","li","li-8",{"children":"pcTimerGetName, pvTimerGetTimerID"}],"\n",["$","li","li-9",{"children":"vTimerSetTimerID, pcTimerGetName"}],"\n",["$","li","li-10",{"children":["xTimerGetPeriod,xTiomerGetExpiryTime",["$","br","br-0",{}],"\nTimer operation"]}],"\n",["$","li","li-11",{"children":"xTimerStart, xTimerStop"}],"\n",["$","li","li-12",{"children":["xTimerChangePeriod, xTimeReset",["$","br","br-0",{}],"\nFrom ISR"]}],"\n",["$","li","li-13",{"children":"xTimerStartFromISR, xTimerStopFromISR"}],"\n",["$","li","li-14",{"children":"xTimerChangePeriodFromeISR,xTimerResetFromISR"}],"\n"]}],"\n",["$","p","p-80",{"children":"Static task creation"}],"\n",["$","pre","pre-34",{"children":["$","code","code-0",{"className":"language-c","children":"TaskHandle_t xTaskCreateStatic(\n    TaskFunction_t pvTaskCode,    // Pointer to the task entry function\n    const char * const pcName,    // Name of the task (for debugging)\n    uint32_t ulStackDepth,        // Size of the task stack (number of StackType_t elements)\n    void *pvParameters,           // Pointer to parameters passed to the task\n    UBaseType_t uxPriority,       // Priority of the task\n    StackType_t *pxStackBuffer,   // Pointer to pre-allocated stack array (at least ulStackDepth elements)\n    StaticTask_t *pxTaskBuffer    // Pointer to pre-allocated task control block (StaticTask_t variable)\n);\n\n"}]}],"\n",["$","p","p-81",{"children":"Returns"}],"\n",["$","ul","ul-97",{"children":["\n",["$","li","li-0",{"children":"pdPASS if neither pxStackBuffer or pxTaskBuiffer are NULL"}],"\n",["$","li","li-1",{"children":["errCOULD_NOT_ALLOCATE_REQUIRED_MEMORY:pxStackBuffer or pxTaskBuffer are NULL",["$","br","br-0",{}],"\nExample :"]}],"\n"]}],"\n",["$","pre","pre-35",{"children":["$","code","code-0",{"className":"language-c","children":"$9"}]}],"\n",["$","h5","h5-17",{"children":"Function Lists"}],"\n",["$","ul","ul-98",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"System Functions Lists (primitives)"}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":[["$","code","code-0",{"children":"MX_FREERTOS_Init();"}]," ",["$","code","code-1",{"children":"osKernelStart();"}]]}],"\n",["$","li","li-1",{"children":["$","code","code-0",{"children":"vTaskStartScheduler"}]}],"\n",["$","li","li-2",{"children":[["$","code","code-0",{"children":"xTaskCreate"}],", ",["$","code","code-1",{"children":"vTaskDelete"}],", ",["$","code","code-2",{"children":"vTaskPrioritySet"}]]}],"\n",["$","li","li-3",{"children":[["$","code","code-0",{"children":"vTaskDelayUntil"}],", ",["$","code","code-1",{"children":"vTaskDelay"}],", ",["$","code","code-2",{"children":"uxTaskPriorityGet"}]]}],"\n",["$","li","li-4",{"children":[["$","code","code-0",{"children":"vTaskSuspend"}],", ",["$","code","code-1",{"children":"vTaskResume"}]]}],"\n",["$","li","li-5",{"children":[["$","code","code-0",{"children":"xTaskResumeFromISR"}],", ",["$","code","code-1",{"children":"xTaskAbortDelay"}]]}],"\n",["$","li","li-6",{"children":[["$","code","code-0",{"children":"taskENTER_CRITICAL"}],", ",["$","code","code-1",{"children":"taskEXIT_CRITICAL"}]]}],"\n",["$","li","li-7",{"children":[["$","code","code-0",{"children":"xTaskNotifyGive"}],", ",["$","code","code-1",{"children":"ulTaskNotifyTake"}],", ",["$","code","code-2",{"children":"xTaskNotify"}]]}],"\n",["$","li","li-8",{"children":[["$","code","code-0",{"children":"xTimerCreate"}],", ",["$","code","code-1",{"children":"xTimerStart"}],", ",["$","code","code-2",{"children":"xTimerStop"}]]}],"\n",["$","li","li-9",{"children":[["$","code","code-0",{"children":"xTimerChangePeriod"}],", ",["$","code","code-1",{"children":"xTimerDelete"}]]}],"\n",["$","li","li-10",{"children":["$","code","code-0",{"children":"xTaskResumeFromISR"}]}],"\n",["$","li","li-11",{"children":[["$","code","code-0",{"children":"xQueueCreate"}],", ",["$","code","code-1",{"children":"vQueueAddToRegistry"}]]}],"\n",["$","li","li-12",{"children":[["$","code","code-0",{"children":"xQueueSend"}],", ",["$","code","code-1",{"children":"xQueueReceive"}]]}],"\n",["$","li","li-13",{"children":[["$","code","code-0",{"children":"xSemaphoreCreateBinary"}],", ",["$","code","code-1",{"children":"xSemaphoreCreateCounting"}],", ",["$","code","code-2",{"children":"xSemaphoreCreateMutex"}],", ",["$","code","code-3",{"children":"vSemaphoreDelete"}]]}],"\n",["$","li","li-14",{"children":[["$","code","code-0",{"children":"xSemaphoreGive"}],", ",["$","code","code-1",{"children":"xSemaphoreTake"}]]}],"\n",["$","li","li-15",{"children":[["$","code","code-0",{"children":"xTimerCreate"}],", ",["$","code","code-1",{"children":"xTimerStart"}]]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h5","h5-18",{"children":"Split an application in tasks"}],"\n",["$","p","p-82",{"children":["Separate all \"parallel\" activities",["$","br","br-0",{}],"\nA cyclic activity generally needs a dedicated task",["$","br","br-1",{}],"\nSplitt the app by functionalities:"]}],"\n",["$","ul","ul-99",{"children":["\n",["$","li","li-0",{"children":"USer interface"}],"\n",["$","li","li-1",{"children":"Update of a display"}],"\n",["$","li","li-2",{"children":"errors handling"}],"\n",["$","li","li-3",{"children":"communications"}],"\n",["$","li","li-4",{"children":"etc..."}],"\n"]}],"\n",["$","p","p-83",{"children":[["$","img","img-0",{"src":"App%20split%20in%20tasks.png","alt":"App split in tasks"}],["$","br","br-0",{}],"\nA driver may need one or more tasks (EX : Client - Server)",["$","br","br-1",{}],"\n",["$","img","img-1",{"src":"Driver.png","alt":"Driver"}],["$","br","br-2",{}],"\nReduce inter-task coupling"]}],"\n",["$","ul","ul-100",{"children":["\n",["$","li","li-0",{"children":["In the following example the second solution is often the best one",["$","br","br-0",{}],"\n",["$","img","img-0",{"src":"Multiple%20vs%20one.png","alt":"Multiple vs one"}],["$","br","br-1",{}],"\nHave not too few task"]}],"\n",["$","li","li-1",{"children":["Whats the utility of the kernel?",["$","br","br-0",{}],"\nHave not too much tasks"]}],"\n",["$","li","li-2",{"children":["It increase the time spent in the kernel and the necessary RAM space",["$","br","br-0",{}],"\nThe task body"]}],"\n",["$","li","li-3",{"children":["must generally consume more than twice the time needed for a context switch",["$","br","br-0",{}],"\nKeep the task body simple"]}],"\n",["$","li","li-4",{"children":["A task may call functions",["$","br","br-0",{}],"\nNo definitive rules Keep in mind:"]}],"\n",["$","li","li-5",{"children":"All tasks are not critical"}],"\n",["$","li","li-6",{"children":["Examples of non critical tasks\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"User interface"}],"\n",["$","li","li-1",{"children":"Screen refresh"}],"\n",["$","li","li-2",{"children":"Keyboard scanning"}],"\n",["$","li","li-3",{"children":"Communication (eg:terminal)"}],"\n"]}],"\n"]}],"\n",["$","li","li-7",{"children":["Example of critical tasks\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Errors handling (system protection)"}],"\n",["$","li","li-1",{"children":"Control loops"}],"\n",["$","li","li-2",{"children":"I/O (analogical, digitals, etc)"}],"\n",["$","li","li-3",{"children":"Communciations (eg:CanBus)"}],"\n"]}],"\n"]}],"\n"]}]]}]]}]]}]}],["$","footer",null,{"className":"bg-muted/50 py-12","children":["$","div",null,{"className":"container mx-auto px-4","children":["$","div",null,{"className":"flex flex-col md:flex-row justify-between items-center","children":[["$","div",null,{"className":"mb-6 md:mb-0","children":[["$","$L3",null,{"href":"/","className":"text-xl font-bold tracking-tight","children":"Matthieu GUYOT"}],["$","p",null,{"className":"text-muted-foreground mt-2 max-w-md","children":"Building the future with code and security. Passionate about technology, cybersecurity, and knowledge sharing."}]]}],["$","div",null,{"className":"flex flex-col items-center md:items-end","children":[["$","div",null,{"className":"flex space-x-4 mb-4","children":[["$","a",null,{"href":"https://github.com/Nearuppp","target":"_blank","rel":"noopener noreferrer","aria-label":"GitHub","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-github h-5 w-5","children":[["$","path","tonef",{"d":"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["$","path","9comsn",{"d":"M9 18c-4.51 2-5-2-7-2"}],"$undefined"]}],"className":"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary"}],["$","a",null,{"href":"https://www.linkedin.com/in/3-100matthieuguyot/","target":"_blank","rel":"noopener noreferrer","aria-label":"LinkedIn","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-linkedin h-5 w-5","children":[["$","path","c2jq9f",{"d":"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}],["$","rect","mk3on5",{"width":"4","height":"12","x":"2","y":"9"}],["$","circle","bt5ra8",{"cx":"4","cy":"4","r":"2"}],"$undefined"]}],"className":"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary"}]]}],["$","p",null,{"className":"text-sm text-muted-foreground","children":["© ",2025," Matthieu GUYOT. All rights reserved."]}]]}]]}]}]}]]}],null],null],null]},[null,["$","$La",null,{"parallelRouterKey":"children","segmentPath":["children","knowledge-hub","children","$b","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lc",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$La",null,{"parallelRouterKey":"children","segmentPath":["children","knowledge-hub","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lc",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/45f8aa93ae81327e.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__className_e8ce0c","children":["$","$Ld",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$La",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lc",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]}]}]],null],null],["$Le",null]]]]
e:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Introduction to Embedded Systems and FreeRTOS | Matthieu GUYOT"}],["$","meta","3",{"name":"description","content":"Overview of embedded systems, their hardware/software components, and the use of FreeRTOS kernel for real-time task management."}],["$","meta","4",{"name":"generator","content":"v0.dev"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
