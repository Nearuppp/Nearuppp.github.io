<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404082734.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404082858.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404083009.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404083138.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404083659.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404083910.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404084955.png"/><link rel="preload" as="image" href="../Excalidraw/Partie%202%20TD%20Bus%20de%20communication.md"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404100706.png"/><link rel="preload" as="image" href="../images/Pasted%20image%2020250404113228.png"/><link rel="stylesheet" href="/_next/static/css/45f8aa93ae81327e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-a3760f0212ccbb12.js"/><script src="/_next/static/chunks/fd9d1056-3750f1c68fb99acb.js" async=""></script><script src="/_next/static/chunks/117-eb26ec6fd88fb5e5.js" async=""></script><script src="/_next/static/chunks/main-app-4f795b60095832c8.js" async=""></script><script src="/_next/static/chunks/671-870bf4da9bc73117.js" async=""></script><script src="/_next/static/chunks/app/knowledge-hub/%5Bslug%5D/page-f17a1fa9deeef7f1.js" async=""></script><script src="/_next/static/chunks/app/layout-dcf2fed02f629d0b.js" async=""></script><title>Travaux Dirige 2 of Bus of Communication | Matthieu GUYOT</title><meta name="description" content="A technical overview of communication interfaces, covering logical and physical adaptations for data exchange in digital and analog systems."/><meta name="generator" content="v0.dev"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_e8ce0c"><script>((e,t,r,n,a,o,l,i)=>{let u=document.documentElement,s=["light","dark"];function c(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?a.map(e=>o[e]||e):a;r?(u.classList.remove(...n),u.classList.add(o&&o[t]?o[t]:t)):u.setAttribute(e,t)}),i&&s.includes(t)&&(u.style.colorScheme=t)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><main class="min-h-screen bg-background"><header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent"><div class="container mx-auto px-4 py-4 flex items-center justify-between"><a class="text-xl font-bold tracking-tight text-primary" href="/">Matthieu GUYOT</a><nav class="hidden md:flex items-center gap-6"><a class="text-muted-foreground hover:text-primary transition-colors" href="/">Home</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/about/">About</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/projects/">Projects</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/knowledge-hub/">Knowledge Hub</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/tags/">Tags</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/resume/">Resume</a><a class="text-muted-foreground hover:text-primary transition-colors" href="/contact/">Contact</a><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full" type="button" id="radix-:Rkmfnnkq:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><span class="sr-only">Toggle theme</span></button></nav><div class="flex items-center gap-4 md:hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full" type="button" id="radix-:Remfnnkq:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><span class="sr-only">Toggle theme</span></button><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-6 w-6"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></header><article class="py-20 pt-32"><div class="container mx-auto px-4 max-w-4xl"><div class="mb-8"><a href="/knowledge-hub/"><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left h-4 w-4"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Back to Knowledge Hub</button></a></div><div class="bg-card p-8 rounded-lg shadow-sm"><div class="mb-6"><h1 class="text-3xl font-bold mb-4">Travaux Dirige 2 of Bus of Communication</h1><div class="flex items-center gap-2 text-muted-foreground mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar h-4 w-4"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg><span>2025-07-29</span></div><div class="flex flex-wrap gap-2 mb-6"><a href="/tags/Electronics/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Electronics</div></a><a href="/tags/Communication/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Communication</div></a><a href="/tags/Interfaces/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Interfaces</div></a><a href="/tags/Tutorial/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Tutorial</div></a><a href="/tags/DigitalSystems/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>DigitalSystems</div></a><a href="/tags/French/"><div class="rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag h-3 w-3"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>French</div></a></div><div class="bg-muted/30 p-4 rounded-lg mb-6"><p class="italic">A technical overview of communication interfaces, covering logical and physical adaptations for data exchange in digital and analog systems.</p></div></div><div class="markdown max-w-none"><h2>Objectif</h2>
<p>Mise en œuvre d&#x27;une liaison série CAN autour du STM32</p>
<h2>Sujet</h2>
<p>On se propose de concevoir un programme qui permettra au STM32 de communiquer avec d&#x27;autres appareils ( USB_MUX_6C6L) sur une liaison CAN.</p>
<ul>
<li>Le module USB_MUX_6C6L est un boitier capable d&#x27;analyser et d&#x27;envoyer a partir d&#x27;une outil logiciel MuxTrade des trames au format CAN ou au format LIN sur six ports indépendants</li>
</ul>
<h2>PARTIE 1 : étude du standard CAN</h2>
<h3>A) Comment les arbitrages de priorités sont-ils effectues sur le bus CAN?</h3>
<p>L&#x27;arbitrage bit a bit non destructif sur le champ d&#x27;arbitrage (identifiant + RTR)</p>
<p><img src="../images/Pasted%20image%2020250404082734.png" alt="Pasted image 20250404082734"/><br/>
Les priorité du bus CAN sont effectue sur la priorité des bit du message en fonction de leur bit dominant et récessif</p>
<h3>B) Décrire les différents champs constituant une trame de données CAN au format standard. Donner les éléments permettant de distinguer une trame de données d&#x27;une trame de requête</h3>
<ul>
<li>Début de trame (Start of Frame ou SOF)</li>
<li>champ d’Arbitrage (Arbitration Field)</li>
<li>champ de Contrôle (Control Field)</li>
<li>champ de Données (Data Field)</li>
<li>champ de CRC (CRC Field)</li>
<li>champ d’Acquittement (ACK Field)</li>
<li>Fin de trame (End of Frame)</li>
</ul>
<p><img src="../images/Pasted%20image%2020250404082858.png" alt="Pasted image 20250404082858"/><br/>
<img src="../images/Pasted%20image%2020250404083009.png" alt="Pasted image 20250404083009"/><br/>
<img src="../images/Pasted%20image%2020250404083138.png" alt="Pasted image 20250404083138"/><br/>
<img src="../images/Pasted%20image%2020250404083659.png" alt="Pasted image 20250404083659"/><br/>
Pour les trames en format Standard le IDE = 0 et pour les trames étendu IDE = 1</p>
<h3>C) Reprendre la définition et décrire une trame au format étendu</h3>
<p>IDE = 1. RTR = 0 pour la trame au format étendu. En tous la trame étendu fait 32 bit<br/>
Une trame de format standard sera toujours prioritaire que étendu. L&#x27;IDE standard est a 0 sur standard donc il sera forcement sur un bit dominant.<br/>
<img src="../images/Pasted%20image%2020250404083910.png" alt="Pasted image 20250404083910"/><br/>
(Pour une trame de requête le RTR est a 1 sinon il a 0)</p>
<h2>PARTIE 2 : analyse d&#x27;une trame CAN HS ( High Speed )</h2>
<h3>A) Donner les niveaux elecrtriques correspondant aux deux etats Logiques du bus CAN.</h3>
<p>Le bit SOF est dominant donc 1</p>
<p><img src="../images/Pasted%20image%2020250404084955.png" alt="Pasted image 20250404084955"/></p>
<h3>Un operateur a relevé a l&#x27;oscilloscope le chronogramme suivant sur un bus CAN. Analyser la trame et en déduire les éléments suivants : l&#x27;identifiant, le nombre d&#x27;octets, les data (si présentes) la valeur du CRC.</h3>
<p><img src="../Excalidraw/Partie%202%20TD%20Bus%20de%20communication.md" alt="Partie 2 TD Bus de communication"/></p>
<p><img src="../images/Pasted%20image%2020250404100706.png" alt="Pasted image 20250404100706"/></p>
<h2>Partie 3 : etude du controleur CAN du STM32 pour l&#x27;envoi de trames</h2>
<p>On veut ecrire un programme d&#x27;envoi de trames sur le bus CAN en mode polling.</p>
<h3>Lire la documentation technique des ports bxCAN du STM32</h3>
<h2>Donner les valeurs bit a bit des registres pour configurer le controleur CAN1 comme suit :</h2>
<ul>
<li>BTR
<ul>
<li>Vitesse de communication 500Kb/s (horlogre tPCLK = 1/36MHz)</li>
<li>On choisira tBS1 = 3 Tq et tBS2=4 * Tq et tJW=1 * Tq</li>
</ul>
</li>
<li>MCR
<ul>
<li>Pas de mode Time Triggering</li>
<li>Gestion automatique du bus off</li>
<li>Pas de wakeup automatique</li>
<li>Pas de blocage de la retransmission</li>
<li>Mode lock pour les FIFO de reception</li>
<li>Priorite chronologique des messages</li>
<li>Autre fonctions desactivees<br/>
<img src="../images/Pasted%20image%2020250404113228.png" alt="Pasted image 20250404113228"/><br/>
Page 68 et 63</li>
</ul>
</li>
</ul>
<h2>Quels sont les autres parametrages a effectuer ?</h2>
<p>Bus CAN utilise PD0 et PD1, activer les horloges GPIOD et BxCAN<br/>
CANTx eb sortie aternative PP<br/>
CANRx en entree flottante</p>
<h1>PARTIE 4 : Parametrage et transmission en langage C</h1>
<p>PARTIE 4: paramétrage et transmission en langage C</p>
<h2>1) Pour programmer en C les différents registres du STM32F107, nous allons réutiliser le fichier stm32f10x cl.h.</h2>
<h3>• Lisez la partie relative au bus CAN (certaines définitions sont fournies en annexe de ce TD</h3>
<p>u8 = unsigned char</p>
<pre><code class="language-c">unsigned char CAN_Init(void)
	u8 InitStatus = 0;
	u16 WaitAck;
	RCC -&gt;APB2ENR |= 0x21;//Horloge AFIO et GPIOD
	RCC -&gt;APB1ENR |= 1&lt;&lt;25;//Horloge du BusCAN
	AFIO -&gt; MAPR |= 3 &lt;&lt;13;//ou 0x6000 redirection sur GPIOD
	GPIOD -&gt; CRL &amp;=0xFFFFFF00;//raz conf PD0 et PD1
	GPIOD -&gt;CRL |=0x000000A4; //PD1 sortie alt PP2MHz
							  //PD0 entree flottante
	CANL -&gt; MCR = 1; //mode init BxCAN (INRQ=1)
	if((CAN1 -&gt; MSR &amp; 1)==0)
	{
	waitAck = 4;
	InitStatus = CANINITFAILED;
	else{
		CAN1 - &gt; MCR = 0x4D; //conserver INKQ a 1
		CAN1 - &gt; BTR = 0x320008; // vitesse 500 Kb/s
		InitStatus = CANINITOK;
		CAN1 - &gt; MCR &amp; = ~ 1; //INRQ=0
		for(i=0;i&lt;0x4000;i++){}//attente
		if((CAN1 - &gt; MSR &amp;1) == 1)//verif de sortie d&#x27;init
			initStatus = CANINITFAILED;
		}
	return initStatus
	}
</code></pre>
<h2>2) En utilisant stm32fl0x_cl.h écrivez les instructions C pour initialiser le module CANI du STM32F 107 avec les paramètres vus dans la partie précédente. Ne pas oublier de forcer le mode adéquat.</h2>
<h2>3) Ecrire un programme de transmission d&#x27;une trame données en mode polling. La trame d&#x27;identifiant 17 doit contenir un octet de donnée valant OxFC. Vous utiliserez la structure CanTxMsg et la fonction CAN_Transmit décrites en annexes.</h2>
<pre><code class="language-c">u8 CAN_TX_Pulling(void)
{
	CanTxMsg TxMessage; u32 i=0;
	u8 TransmitMailBox;
	TxMessage StdId = 0x11;
	RTR = 0; //data
	IDE = 0; //standard
	DLC = 1; // 1 octet
	Data[0] = 0xFC;//
	TransmitMailBox=CANTransmit (&amp;TxMessage);
	i = 0;
	while( CAN_TransmitStatus(TransmitMailBox)!=CANTXOK)&amp;&amp;(i!=0xFF)
	
}
</code></pre>
<h1>PARTIE 5: étude du contrôleur CAN du STM32 pour la réception de trames.</h1>
<p>On désire ajouter la fonction de réception de trames depuis le bus CAN. Pour cela il faudra paramétrer les filtres d&#x27;acceptation des FIFO et aller récupérer les éléments de messages qui sont acceptés.<br/>
Les éléments du message à capter sont les suivants :</p>
<ul>
<li>ID : 100</li>
<li>Identifiant sur 32 bits.<br/>
Paramétrer le filtre 0 du module CAN1 de manière à accepter les messages de ce type.</li>
</ul>
<h1>PARTIE 6: Programme de réception de trames en langage C.</h1>
<h2>1) Ecrire la fonction CAN_FilterInit de paramétrage du filtre selon les éléments de la partie précédente.</h2>
<h2>2) Ecrire une fonction void CAN_FIFORelease(u8 FIFONumber) qui libère la FIFO FIFONumber une fois le message lu (cf. utilisation dans la fonction CAN_Receive).</h2>
<h2>3) Programme de réception de messages : on désire réceptionner les trames sous interruption. Quelles sont les opérations à effectuer pour y parvenir.</h2></div></div></div></article><footer class="bg-muted/50 py-12"><div class="container mx-auto px-4"><div class="flex flex-col md:flex-row justify-between items-center"><div class="mb-6 md:mb-0"><a class="text-xl font-bold tracking-tight" href="/">Matthieu GUYOT</a><p class="text-muted-foreground mt-2 max-w-md">Building the future with code and security. Passionate about technology, cybersecurity, and knowledge sharing.</p></div><div class="flex flex-col items-center md:items-end"><div class="flex space-x-4 mb-4"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github h-5 w-5"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin h-5 w-5"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter" class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter h-5 w-5"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a></div><p class="text-sm text-muted-foreground">© <!-- -->2025<!-- --> Matthieu GUYOT. All rights reserved.</p></div></div></div></footer></main><script src="/_next/static/chunks/webpack-a3760f0212ccbb12.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/45f8aa93ae81327e.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[2846,[],\"\"]\n5:I[168,[\"671\",\"static/chunks/671-870bf4da9bc73117.js\",\"242\",\"static/chunks/app/knowledge-hub/%5Bslug%5D/page-f17a1fa9deeef7f1.js\"],\"default\"]\n6:I[2972,[\"671\",\"static/chunks/671-870bf4da9bc73117.js\",\"242\",\"static/chunks/app/knowledge-hub/%5Bslug%5D/page-f17a1fa9deeef7f1.js\"],\"\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[2798,[\"185\",\"static/chunks/app/layout-dcf2fed02f629d0b.js\"],\"ThemeProvider\"]\nc:I[1060,[],\"\"]\n8:[\"slug\",\"bus-de-communication-td-2-md\",\"d\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L3\",null,{\"buildId\":\"iU9oURWGdCS2TpEAt4Xzl\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"knowledge-hub\",\"bus-de-communication-td-2-md\",\"\"],\"initialTree\":[\"\",{\"children\":[\"knowledge-hub\",{\"children\":[[\"slug\",\"bus-de-communication-td-2-md\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"bus-de-communication-td-2-md\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"knowledge-hub\",{\"children\":[[\"slug\",\"bus-de-communication-td-2-md\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"main\",null,{\"className\":\"min-h-screen bg-background\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"article\",null,{\"className\":\"py-20 pt-32\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 max-w-4xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/knowledge-hub/\",\"children\":[\"$\",\"button\",null,{\"className\":\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg]:size-4 [\u0026_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 gap-2\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left h-4 w-4\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],\"Back to Knowledge Hub\"]}]}]}],[\"$\",\"div\",null,{\"className\":\"bg-card p-8 rounded-lg shadow-sm\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-6\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl font-bold mb-4\",\"children\":\"Travaux Dirige 2 of Bus of Communication\"}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 text-muted-foreground mb-4\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-calendar h-4 w-4\",\"children\":[[\"$\",\"path\",\"1cmpym\",{\"d\":\"M8 2v4\"}],[\"$\",\"path\",\"4m81vk\",{\"d\":\"M16 2v4\"}],[\"$\",\"rect\",\"1hopcy\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"4\",\"rx\":\"2\"}],[\"$\",\"path\",\"8toen8\",{\"d\":\"M3 10h18\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"2025-07-29\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2 mb-6\",\"children\":[[\"$\",\"$L6\",\"Electronics\",{\"href\":\"/tags/Electronics/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Electronics\"]}]}],[\"$\",\"$L6\",\"Communication\",{\"href\":\"/tags/Communication/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Communication\"]}]}],[\"$\",\"$L6\",\"Interfaces\",{\"href\":\"/tags/Interfaces/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Interfaces\"]}]}],[\"$\",\"$L6\",\"Tutorial\",{\"href\":\"/tags/Tutorial/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Tutorial\"]}]}],[\"$\",\"$L6\",\"DigitalSystems\",{\"href\":\"/tags/DigitalSystems/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"DigitalSystems\"]}]}],[\"$\",\"$L6\",\"French\",{\"href\":\"/tags/French/\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground flex items-center gap-1 hover:bg-primary/10 cursor-pointer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag h-3 w-3\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"French\"]}]}]]}],[\"$\",\"div\",null,{\"className\":\"bg-muted/30 p-4 rounded-lg mb-6\",\"children\":[\"$\",\"p\",null,{\"className\":\"italic\",\"children\":\"A technical overview of communication interfaces, covering logical and physical adaptations for data exchange in digital and analog systems.\"}]}]]}],[\"$\",\"div\",null,{\"className\":\"markdown max-w-none\",\"children\":[[\"$\",\"h2\",\"h2-0\",{\"children\":\"Objectif\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Mise en œuvre d'une liaison série CAN autour du STM32\"}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Sujet\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"On se propose de concevoir un programme qui permettra au STM32 de communiquer avec d'autres appareils ( USB_MUX_6C6L) sur une liaison CAN.\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Le module USB_MUX_6C6L est un boitier capable d'analyser et d'envoyer a partir d'une outil logiciel MuxTrade des trames au format CAN ou au format LIN sur six ports indépendants\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"PARTIE 1 : étude du standard CAN\"}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"A) Comment les arbitrages de priorités sont-ils effectues sur le bus CAN?\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"L'arbitrage bit a bit non destructif sur le champ d'arbitrage (identifiant + RTR)\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404082734.png\",\"alt\":\"Pasted image 20250404082734\"}],[\"$\",\"br\",\"br-0\",{}],\"\\nLes priorité du bus CAN sont effectue sur la priorité des bit du message en fonction de leur bit dominant et récessif\"]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"B) Décrire les différents champs constituant une trame de données CAN au format standard. Donner les éléments permettant de distinguer une trame de données d'une trame de requête\"}],\"\\n\",[\"$\",\"ul\",\"ul-1\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Début de trame (Start of Frame ou SOF)\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"champ d’Arbitrage (Arbitration Field)\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"champ de Contrôle (Control Field)\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"champ de Données (Data Field)\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"champ de CRC (CRC Field)\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"champ d’Acquittement (ACK Field)\"}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":\"Fin de trame (End of Frame)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404082858.png\",\"alt\":\"Pasted image 20250404082858\"}],[\"$\",\"br\",\"br-0\",{}],\"\\n\",[\"$\",\"img\",\"img-1\",{\"src\":\"../images/Pasted%20image%2020250404083009.png\",\"alt\":\"Pasted image 20250404083009\"}],[\"$\",\"br\",\"br-1\",{}],\"\\n\",[\"$\",\"img\",\"img-2\",{\"src\":\"../images/Pasted%20image%2020250404083138.png\",\"alt\":\"Pasted image 20250404083138\"}],[\"$\",\"br\",\"br-2\",{}],\"\\n\",[\"$\",\"img\",\"img-3\",{\"src\":\"../images/Pasted%20image%2020250404083659.png\",\"alt\":\"Pasted image 20250404083659\"}],[\"$\",\"br\",\"br-3\",{}],\"\\nPour les trames en format Standard le IDE = 0 et pour les trames étendu IDE = 1\"]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"C) Reprendre la définition et décrire une trame au format étendu\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[\"IDE = 1. RTR = 0 pour la trame au format étendu. En tous la trame étendu fait 32 bit\",[\"$\",\"br\",\"br-0\",{}],\"\\nUne trame de format standard sera toujours prioritaire que étendu. L'IDE standard est a 0 sur standard donc il sera forcement sur un bit dominant.\",[\"$\",\"br\",\"br-1\",{}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404083910.png\",\"alt\":\"Pasted image 20250404083910\"}],[\"$\",\"br\",\"br-2\",{}],\"\\n(Pour une trame de requête le RTR est a 1 sinon il a 0)\"]}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"PARTIE 2 : analyse d'une trame CAN HS ( High Speed )\"}],\"\\n\",[\"$\",\"h3\",\"h3-3\",{\"children\":\"A) Donner les niveaux elecrtriques correspondant aux deux etats Logiques du bus CAN.\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"Le bit SOF est dominant donc 1\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404084955.png\",\"alt\":\"Pasted image 20250404084955\"}]}],\"\\n\",[\"$\",\"h3\",\"h3-4\",{\"children\":\"Un operateur a relevé a l'oscilloscope le chronogramme suivant sur un bus CAN. Analyser la trame et en déduire les éléments suivants : l'identifiant, le nombre d'octets, les data (si présentes) la valeur du CRC.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"../Excalidraw/Partie%202%20TD%20Bus%20de%20communication.md\",\"alt\":\"Partie 2 TD Bus de communication\"}]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404100706.png\",\"alt\":\"Pasted image 20250404100706\"}]}],\"\\n\",[\"$\",\"h2\",\"h2-4\",{\"children\":\"Partie 3 : etude du controleur CAN du STM32 pour l'envoi de trames\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":\"On veut ecrire un programme d'envoi de trames sur le bus CAN en mode polling.\"}],\"\\n\",[\"$\",\"h3\",\"h3-5\",{\"children\":\"Lire la documentation technique des ports bxCAN du STM32\"}],\"\\n\",[\"$\",\"h2\",\"h2-5\",{\"children\":\"Donner les valeurs bit a bit des registres pour configurer le controleur CAN1 comme suit :\"}],\"\\n\",[\"$\",\"ul\",\"ul-2\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"BTR\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Vitesse de communication 500Kb/s (horlogre tPCLK = 1/36MHz)\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"On choisira tBS1 = 3 Tq et tBS2=4 * Tq et tJW=1 * Tq\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"MCR\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Pas de mode Time Triggering\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Gestion automatique du bus off\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Pas de wakeup automatique\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Pas de blocage de la retransmission\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Mode lock pour les FIFO de reception\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Priorite chronologique des messages\"}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":[\"Autre fonctions desactivees\",[\"$\",\"br\",\"br-0\",{}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"../images/Pasted%20image%2020250404113228.png\",\"alt\":\"Pasted image 20250404113228\"}],[\"$\",\"br\",\"br-1\",{}],\"\\nPage 68 et 63\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-6\",{\"children\":\"Quels sont les autres parametrages a effectuer ?\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"Bus CAN utilise PD0 et PD1, activer les horloges GPIOD et BxCAN\",[\"$\",\"br\",\"br-0\",{}],\"\\nCANTx eb sortie aternative PP\",[\"$\",\"br\",\"br-1\",{}],\"\\nCANRx en entree flottante\"]}],\"\\n\",[\"$\",\"h1\",\"h1-0\",{\"children\":\"PARTIE 4 : Parametrage et transmission en langage C\"}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":\"PARTIE 4: paramétrage et transmission en langage C\"}],\"\\n\",[\"$\",\"h2\",\"h2-7\",{\"children\":\"1) Pour programmer en C les différents registres du STM32F107, nous allons réutiliser le fichier stm32f10x cl.h.\"}],\"\\n\",[\"$\",\"h3\",\"h3-6\",{\"children\":\"• Lisez la partie relative au bus CAN (certaines définitions sont fournies en annexe de ce TD\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"u8 = unsigned char\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-c\",\"children\":\"unsigned char CAN_Init(void)\\n\\tu8 InitStatus = 0;\\n\\tu16 WaitAck;\\n\\tRCC -\u003eAPB2ENR |= 0x21;//Horloge AFIO et GPIOD\\n\\tRCC -\u003eAPB1ENR |= 1\u003c\u003c25;//Horloge du BusCAN\\n\\tAFIO -\u003e MAPR |= 3 \u003c\u003c13;//ou 0x6000 redirection sur GPIOD\\n\\tGPIOD -\u003e CRL \u0026=0xFFFFFF00;//raz conf PD0 et PD1\\n\\tGPIOD -\u003eCRL |=0x000000A4; //PD1 sortie alt PP2MHz\\n\\t\\t\\t\\t\\t\\t\\t  //PD0 entree flottante\\n\\tCANL -\u003e MCR = 1; //mode init BxCAN (INRQ=1)\\n\\tif((CAN1 -\u003e MSR \u0026 1)==0)\\n\\t{\\n\\twaitAck = 4;\\n\\tInitStatus = CANINITFAILED;\\n\\telse{\\n\\t\\tCAN1 - \u003e MCR = 0x4D; //conserver INKQ a 1\\n\\t\\tCAN1 - \u003e BTR = 0x320008; // vitesse 500 Kb/s\\n\\t\\tInitStatus = CANINITOK;\\n\\t\\tCAN1 - \u003e MCR \u0026 = ~ 1; //INRQ=0\\n\\t\\tfor(i=0;i\u003c0x4000;i++){}//attente\\n\\t\\tif((CAN1 - \u003e MSR \u00261) == 1)//verif de sortie d'init\\n\\t\\t\\tinitStatus = CANINITFAILED;\\n\\t\\t}\\n\\treturn initStatus\\n\\t}\\n\"}]}],\"\\n\",[\"$\",\"h2\",\"h2-8\",{\"children\":\"2) En utilisant stm32fl0x_cl.h écrivez les instructions C pour initialiser le module CANI du STM32F 107 avec les paramètres vus dans la partie précédente. Ne pas oublier de forcer le mode adéquat.\"}],\"\\n\",[\"$\",\"h2\",\"h2-9\",{\"children\":\"3) Ecrire un programme de transmission d'une trame données en mode polling. La trame d'identifiant 17 doit contenir un octet de donnée valant OxFC. Vous utiliserez la structure CanTxMsg et la fonction CAN_Transmit décrites en annexes.\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-c\",\"children\":\"u8 CAN_TX_Pulling(void)\\n{\\n\\tCanTxMsg TxMessage; u32 i=0;\\n\\tu8 TransmitMailBox;\\n\\tTxMessage StdId = 0x11;\\n\\tRTR = 0; //data\\n\\tIDE = 0; //standard\\n\\tDLC = 1; // 1 octet\\n\\tData[0] = 0xFC;//\\n\\tTransmitMailBox=CANTransmit (\u0026TxMessage);\\n\\ti = 0;\\n\\twhile( CAN_TransmitStatus(TransmitMailBox)!=CANTXOK)\u0026\u0026(i!=0xFF)\\n\\t\\n}\\n\"}]}],\"\\n\",[\"$\",\"h1\",\"h1-1\",{\"children\":\"PARTIE 5: étude du contrôleur CAN du STM32 pour la réception de trames.\"}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":[\"On désire ajouter la fonction de réception de trames depuis le bus CAN. Pour cela il faudra paramétrer les filtres d'acceptation des FIFO et aller récupérer les éléments de messages qui sont acceptés.\",[\"$\",\"br\",\"br-0\",{}],\"\\nLes éléments du message à capter sont les suivants :\"]}],\"\\n\",[\"$\",\"ul\",\"ul-3\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"ID : 100\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Identifiant sur 32 bits.\",[\"$\",\"br\",\"br-0\",{}],\"\\nParamétrer le filtre 0 du module CAN1 de manière à accepter les messages de ce type.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",\"h1-2\",{\"children\":\"PARTIE 6: Programme de réception de trames en langage C.\"}],\"\\n\",[\"$\",\"h2\",\"h2-10\",{\"children\":\"1) Ecrire la fonction CAN_FilterInit de paramétrage du filtre selon les éléments de la partie précédente.\"}],\"\\n\",[\"$\",\"h2\",\"h2-11\",{\"children\":\"2) Ecrire une fonction void CAN_FIFORelease(u8 FIFONumber) qui libère la FIFO FIFONumber une fois le message lu (cf. utilisation dans la fonction CAN_Receive).\"}],\"\\n\",[\"$\",\"h2\",\"h2-12\",{\"children\":\"3) Programme de réception de messages : on désire réceptionner les trames sous interruption. Quelles sont les opérations à effectuer pour y parvenir.\"}]]}]]}]]}]}],[\"$\",\"footer\",null,{\"className\":\"bg-muted/50 py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col md:flex-row justify-between items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-6 md:mb-0\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"text-xl font-bold tracking-tight\",\"children\":\"Matthieu GUYOT\"}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground mt-2 max-w-md\",\"children\":\"Building the future with code and security. Passionate about technology, cybersecurity, and knowledge sharing.\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center md:items-end\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex space-x-4 mb-4\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"aria-label\":\"GitHub\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github h-5 w-5\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],\"className\":\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg]:size-4 [\u0026_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary\"}],[\"$\",\"a\",null,{\"href\":\"https://linkedin.com/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"aria-label\":\"LinkedIn\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin h-5 w-5\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],\"className\":\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg]:size-4 [\u0026_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary\"}],[\"$\",\"a\",null,{\"href\":\"https://twitter.com/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"aria-label\":\"Twitter\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-twitter h-5 w-5\",\"children\":[[\"$\",\"path\",\"pff0z6\",{\"d\":\"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z\"}],\"$undefined\"]}],\"className\":\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg]:size-4 [\u0026_svg]:shrink-0 h-10 w-10 rounded-full hover:bg-primary/10 hover:text-primary\"}]]}],[\"$\",\"p\",null,{\"className\":\"text-sm text-muted-foreground\",\"children\":[\"© \",2025,\" Matthieu GUYOT. All rights reserved.\"]}]]}]]}]}]}]]}],null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"knowledge-hub\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"knowledge-hub\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/45f8aa93ae81327e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[\"$\",\"$La\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Travaux Dirige 2 of Bus of Communication | Matthieu GUYOT\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A technical overview of communication interfaces, covering logical and physical adaptations for data exchange in digital and analog systems.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"generator\",\"content\":\"v0.dev\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>